import{u as Jr,f as en,b as E,L as tn,g as qe,h as rn,i as se,N as nn,k as an,P as sn,H as ln}from"./r.51890fa1.js";import{c as on,d as gt,p as yt,r as xt,l as Et,o as vt,e as Ct,f as lr,j as n,S as cn,A as Le,G as x,a as f,D as un,B as N,T as b,h as Z,i as Te,k as bt,I as J,m as dn,L as hn,n as pn,q as Ze,s as G,t as F,u as W,M as P,v as re,C as be,w as de,x as fn,y as mn,z as gn,E as yn,H as xn,J as En,K as vn,P as Cn,N as U,O as He,Q as Ke,R as bn,U as An,V as _n,W as ut,X as In,Y as zt,Z as Vt,$ as Bt,a0 as Ut,a1 as Pr,a2 as Sn,a3 as On,a4 as Tn,a5 as wn}from"./m.0ef3d495.js";import{S as le}from"./d.st.800da8c5.js";import{P as Pt,D as Kt,R as Yt,F as Rr,T as Ln,M as or,a as At,b as Pn,c as _t}from"./d.ec93ea7b.js";import{S as pe}from"./d.sk.18f8ae9f.js";import{T as we}from"./d.tr.1ab51c40.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();const Rn="/bwgr-tools/assets/literata.073a4ddf.woff",Nn="/bwgr-tools/assets/thryromanes.f8fcdde0.woff",kn="/bwgr-tools/assets/CormorantUpright-SemiBold.4ad866b1.woff",nt="#ffffff",Dn="#000000",Mn=nt,dt=on({components:{MuiCssBaseline:{styleOverrides:`
				@font-face {
					font-family: 'text';
					src: url(${Rn}) format('woff');
				}
				@font-face {
					font-family: 'title';
					src: url(${Nn}) format('woff');
				}
				@font-face {
					font-family: 'hand';
					src: url(${kn}) format('woff');
				}
			`}},palette:{mode:"dark",common:{black:Dn,white:nt},primary:{main:gt[200],light:gt[50],dark:gt[400],contrastText:Mn},secondary:{main:yt[200],light:yt[50],dark:yt[400]},error:{main:xt[500],light:xt[300],dark:xt[700]},info:{main:Et[400],light:Et[300],dark:Et[700]},warning:{main:vt[400],light:vt[300],dark:vt[700]},success:{main:Ct[400],light:Ct[300],dark:Ct[700]},grey:lr,text:{primary:nt,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:lr[900],default:"#121212"},action:{active:nt,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}},shape:{borderRadius:4},typography:{htmlFontSize:16,fontFamily:"text",fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700,h1:{fontFamily:"title"},h2:{fontFamily:"title"},h3:{fontFamily:"title"},h4:{fontFamily:"title"},h5:{fontFamily:"title"},h6:{fontFamily:"title"},subtitle1:{fontFamily:"hand"},subtitle2:{fontFamily:"hand"},body1:{fontFamily:"text"},body2:{fontFamily:"text",textIndent:"8px",textAlign:"justify",textJustify:"inter-word",marginTop:"3px"},button:{fontFamily:"text"},caption:{fontFamily:"text"},overline:{fontFamily:"text"}}});function ue(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Pe(e){return!!e&&!!e[$]}function Re(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Bn}(e)||Array.isArray(e)||!!e[mr]||!!e.constructor[mr]||Xt(e)||qt(e))}function Ne(e,t,r){r===void 0&&(r=!1),je(e)===0?(r?Object.keys:We)(e).forEach(function(i){r&&typeof i=="symbol"||t(i,e[i],e)}):e.forEach(function(i,a){return t(a,i,e)})}function je(e){var t=e[$];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Xt(e)?2:qt(e)?3:0}function Fe(e,t){return je(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Gn(e,t){return je(e)===2?e.get(t):e[t]}function Nr(e,t,r){var i=je(e);i===2?e.set(t,r):i===3?(e.delete(t),e.add(r)):e[t]=r}function kr(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Xt(e){return zn&&e instanceof Map}function qt(e){return Vn&&e instanceof Set}function Se(e){return e.o||e.t}function Zt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Mr(e);delete t[$];for(var r=We(t),i=0;i<r.length;i++){var a=r[i],s=t[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Qt(e,t){return t===void 0&&(t=!1),Jt(e)||Pe(e)||!Re(e)||(je(e)>1&&(e.set=e.add=e.clear=e.delete=Fn),Object.freeze(e),t&&Ne(e,function(r,i){return Qt(i,!0)},!0)),e}function Fn(){ue(2)}function Jt(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function me(e){var t=Dt[e];return t||ue(18,e),t}function Wn(e,t){Dt[e]||(Dt[e]=t)}function Rt(){return Ye}function It(e,t){t&&(me("Patches"),e.u=[],e.s=[],e.v=t)}function it(e){Nt(e),e.p.forEach(Hn),e.p=null}function Nt(e){e===Ye&&(Ye=e.l)}function cr(e){return Ye={p:[],l:Ye,h:e,m:!0,_:0}}function Hn(e){var t=e[$];t.i===0||t.i===1?t.j():t.O=!0}function St(e,t){t._=t.p.length;var r=t.p[0],i=e!==void 0&&e!==r;return t.h.g||me("ES5").S(t,e,i),i?(r[$].P&&(it(t),ue(4)),Re(e)&&(e=at(t,e),t.l||st(t,e)),t.u&&me("Patches").M(r[$].t,e,t.u,t.s)):e=at(t,r,[]),it(t),t.u&&t.v(t.u,t.s),e!==Dr?e:void 0}function at(e,t,r){if(Jt(t))return t;var i=t[$];if(!i)return Ne(t,function(s,l){return ur(e,i,t,s,l,r)},!0),t;if(i.A!==e)return t;if(!i.P)return st(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var a=i.i===4||i.i===5?i.o=Zt(i.k):i.o;Ne(i.i===3?new Set(a):a,function(s,l){return ur(e,i,a,s,l,r)}),st(e,a,!1),r&&e.u&&me("Patches").R(i,r,e.u,e.s)}return i.o}function ur(e,t,r,i,a,s){if(Pe(a)){var l=at(e,a,s&&t&&t.i!==3&&!Fe(t.D,i)?s.concat(i):void 0);if(Nr(r,i,l),!Pe(l))return;e.m=!1}if(Re(a)&&!Jt(a)){if(!e.h.F&&e._<1)return;at(e,a),t&&t.A.l||st(e,a)}}function st(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&Qt(t,r)}function Ot(e,t){var r=e[$];return(r?Se(r):e)[t]}function dr(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=Object.getPrototypeOf(r)}}function Ce(e){e.P||(e.P=!0,e.l&&Ce(e.l))}function Tt(e){e.o||(e.o=Zt(e.t))}function kt(e,t,r){var i=Xt(t)?me("MapSet").N(t,r):qt(t)?me("MapSet").T(t,r):e.g?function(a,s){var l=Array.isArray(a),o={i:l?1:0,A:s?s.A:Rt(),P:!1,I:!1,D:{},l:s,t:a,k:null,o:null,j:null,C:!1},u=o,c=Xe;l&&(u=[o],c=Ue);var p=Proxy.revocable(u,c),h=p.revoke,m=p.proxy;return o.k=m,o.j=h,m}(t,r):me("ES5").J(t,r);return(r?r.A:Rt()).p.push(i),i}function jn(e){return Pe(e)||ue(22,e),function t(r){if(!Re(r))return r;var i,a=r[$],s=je(r);if(a){if(!a.P&&(a.i<4||!me("ES5").K(a)))return a.t;a.I=!0,i=hr(r,s),a.I=!1}else i=hr(r,s);return Ne(i,function(l,o){a&&Gn(a.t,l)===o||Nr(i,l,t(o))}),s===3?new Set(i):i}(e)}function hr(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Zt(e)}function $n(){function e(s,l){var o=a[s];return o?o.enumerable=l:a[s]=o={configurable:!0,enumerable:l,get:function(){var u=this[$];return Xe.get(u,s)},set:function(u){var c=this[$];Xe.set(c,s,u)}},o}function t(s){for(var l=s.length-1;l>=0;l--){var o=s[l][$];if(!o.P)switch(o.i){case 5:i(o)&&Ce(o);break;case 4:r(o)&&Ce(o)}}}function r(s){for(var l=s.t,o=s.k,u=We(o),c=u.length-1;c>=0;c--){var p=u[c];if(p!==$){var h=l[p];if(h===void 0&&!Fe(l,p))return!0;var m=o[p],g=m&&m[$];if(g?g.t!==h:!kr(m,h))return!0}}var d=!!l[$];return u.length!==We(l).length+(d?0:1)}function i(s){var l=s.k;if(l.length!==s.t.length)return!0;var o=Object.getOwnPropertyDescriptor(l,l.length-1);if(o&&!o.get)return!0;for(var u=0;u<l.length;u++)if(!l.hasOwnProperty(u))return!0;return!1}var a={};Wn("ES5",{J:function(s,l){var o=Array.isArray(s),u=function(p,h){if(p){for(var m=Array(h.length),g=0;g<h.length;g++)Object.defineProperty(m,""+g,e(g,!0));return m}var d=Mr(h);delete d[$];for(var y=We(d),C=0;C<y.length;C++){var A=y[C];d[A]=e(A,p||!!d[A].enumerable)}return Object.create(Object.getPrototypeOf(h),d)}(o,s),c={i:o?5:4,A:l?l.A:Rt(),P:!1,I:!1,D:{},l,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,$,{value:c,writable:!0}),u},S:function(s,l,o){o?Pe(l)&&l[$].A===s&&t(s.p):(s.u&&function u(c){if(c&&typeof c=="object"){var p=c[$];if(p){var h=p.t,m=p.k,g=p.D,d=p.i;if(d===4)Ne(m,function(_){_!==$&&(h[_]!==void 0||Fe(h,_)?g[_]||u(m[_]):(g[_]=!0,Ce(p)))}),Ne(h,function(_){m[_]!==void 0||Fe(m,_)||(g[_]=!1,Ce(p))});else if(d===5){if(i(p)&&(Ce(p),g.length=!0),m.length<h.length)for(var y=m.length;y<h.length;y++)g[y]=!1;else for(var C=h.length;C<m.length;C++)g[C]=!0;for(var A=Math.min(m.length,h.length),O=0;O<A;O++)m.hasOwnProperty(O)||(g[O]=!0),g[O]===void 0&&u(m[O])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?r(s):i(s)}})}var pr,Ye,er=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zn=typeof Map<"u",Vn=typeof Set<"u",fr=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Dr=er?Symbol.for("immer-nothing"):((pr={})["immer-nothing"]=!0,pr),mr=er?Symbol.for("immer-draftable"):"__$immer_draftable",$=er?Symbol.for("immer-state"):"__$immer_state",Bn=""+Object.prototype.constructor,We=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Mr=Object.getOwnPropertyDescriptors||function(e){var t={};return We(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Dt={},Xe={get:function(e,t){if(t===$)return e;var r=Se(e);if(!Fe(r,t))return function(a,s,l){var o,u=dr(s,l);return u?"value"in u?u.value:(o=u.get)===null||o===void 0?void 0:o.call(a.k):void 0}(e,r,t);var i=r[t];return e.I||!Re(i)?i:i===Ot(e.t,t)?(Tt(e),e.o[t]=kt(e.A.h,i,e)):i},has:function(e,t){return t in Se(e)},ownKeys:function(e){return Reflect.ownKeys(Se(e))},set:function(e,t,r){var i=dr(Se(e),t);if(i!=null&&i.set)return i.set.call(e.k,r),!0;if(!e.P){var a=Ot(Se(e),t),s=a==null?void 0:a[$];if(s&&s.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(kr(r,a)&&(r!==void 0||Fe(e.t,t)))return!0;Tt(e),Ce(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Ot(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Tt(e),Ce(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Se(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},defineProperty:function(){ue(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ue(12)}},Ue={};Ne(Xe,function(e,t){Ue[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ue.deleteProperty=function(e,t){return Ue.set.call(this,e,t,void 0)},Ue.set=function(e,t,r){return Xe.set.call(this,e[0],t,r,e[0])};var Un=function(){function e(r){var i=this;this.g=fr,this.F=!0,this.produce=function(a,s,l){if(typeof a=="function"&&typeof s!="function"){var o=s;s=a;var u=i;return function(y){var C=this;y===void 0&&(y=o);for(var A=arguments.length,O=Array(A>1?A-1:0),_=1;_<A;_++)O[_-1]=arguments[_];return u.produce(y,function(R){var L;return(L=s).call.apply(L,[C,R].concat(O))})}}var c;if(typeof s!="function"&&ue(6),l!==void 0&&typeof l!="function"&&ue(7),Re(a)){var p=cr(i),h=kt(i,a,void 0),m=!0;try{c=s(h),m=!1}finally{m?it(p):Nt(p)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return It(p,l),St(y,p)},function(y){throw it(p),y}):(It(p,l),St(c,p))}if(!a||typeof a!="object"){if((c=s(a))===void 0&&(c=a),c===Dr&&(c=void 0),i.F&&Qt(c,!0),l){var g=[],d=[];me("Patches").M(a,c,g,d),l(g,d)}return c}ue(21,a)},this.produceWithPatches=function(a,s){if(typeof a=="function")return function(c){for(var p=arguments.length,h=Array(p>1?p-1:0),m=1;m<p;m++)h[m-1]=arguments[m];return i.produceWithPatches(c,function(g){return a.apply(void 0,[g].concat(h))})};var l,o,u=i.produce(a,s,function(c,p){l=c,o=p});return typeof Promise<"u"&&u instanceof Promise?u.then(function(c){return[c,l,o]}):[u,l,o]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Re(r)||ue(8),Pe(r)&&(r=jn(r));var i=cr(this),a=kt(this,r,void 0);return a[$].C=!0,Nt(i),a},t.finishDraft=function(r,i){var a=r&&r[$],s=a.A;return It(s,i),St(void 0,s)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!fr&&ue(20),this.g=r},t.applyPatches=function(r,i){var a;for(a=i.length-1;a>=0;a--){var s=i[a];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}a>-1&&(i=i.slice(a+1));var l=me("Patches").$;return Pe(r)?l(r,i):this.produce(r,function(o){return l(o,i)})},e}(),ae=new Un;ae.produce;ae.produceWithPatches.bind(ae);ae.setAutoFreeze.bind(ae);ae.setUseProxies.bind(ae);ae.applyPatches.bind(ae);ae.createDraft.bind(ae);ae.finishDraft.bind(ae);function Kn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,i)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gr(Object(r),!0).forEach(function(i){Kn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function q(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var xr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),wt=function(){return Math.random().toString(36).substring(7).split("").join(".")},lt={INIT:"@@redux/INIT"+wt(),REPLACE:"@@redux/REPLACE"+wt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+wt()}};function Yn(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Gr(e,t,r){var i;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(q(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(q(1));return r(Gr)(e,t)}if(typeof e!="function")throw new Error(q(2));var a=e,s=t,l=[],o=l,u=!1;function c(){o===l&&(o=l.slice())}function p(){if(u)throw new Error(q(3));return s}function h(y){if(typeof y!="function")throw new Error(q(4));if(u)throw new Error(q(5));var C=!0;return c(),o.push(y),function(){if(!!C){if(u)throw new Error(q(6));C=!1,c();var O=o.indexOf(y);o.splice(O,1),l=null}}}function m(y){if(!Yn(y))throw new Error(q(7));if(typeof y.type>"u")throw new Error(q(8));if(u)throw new Error(q(9));try{u=!0,s=a(s,y)}finally{u=!1}for(var C=l=o,A=0;A<C.length;A++){var O=C[A];O()}return y}function g(y){if(typeof y!="function")throw new Error(q(10));a=y,m({type:lt.REPLACE})}function d(){var y,C=h;return y={subscribe:function(O){if(typeof O!="object"||O===null)throw new Error(q(11));function _(){O.next&&O.next(p())}_();var R=C(_);return{unsubscribe:R}}},y[xr]=function(){return this},y}return m({type:lt.INIT}),i={dispatch:m,subscribe:h,getState:p,replaceReducer:g},i[xr]=d,i}function Xn(e){Object.keys(e).forEach(function(t){var r=e[t],i=r(void 0,{type:lt.INIT});if(typeof i>"u")throw new Error(q(12));if(typeof r(void 0,{type:lt.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(q(13))})}function Fr(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var a=t[i];typeof e[a]=="function"&&(r[a]=e[a])}var s=Object.keys(r),l;try{Xn(r)}catch(o){l=o}return function(u,c){if(u===void 0&&(u={}),l)throw l;for(var p=!1,h={},m=0;m<s.length;m++){var g=s[m],d=r[g],y=u[g],C=d(y,c);if(typeof C>"u")throw c&&c.type,new Error(q(14));h[g]=C,p=p||C!==y}return p=p||s.length!==Object.keys(u).length,p?h:u}}function ot(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(i){return i}:t.length===1?t[0]:t.reduce(function(i,a){return function(){return i(a.apply(void 0,arguments))}})}function qn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return function(){var a=i.apply(void 0,arguments),s=function(){throw new Error(q(15))},l={getState:a.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=t.map(function(u){return u(l)});return s=ot.apply(void 0,o)(a.dispatch),yr(yr({},a),{},{dispatch:s})}}}function Wr(e){var t=function(i){var a=i.dispatch,s=i.getState;return function(l){return function(o){return typeof o=="function"?o(a,s,e):l(o)}}};return t}var Hr=Wr();Hr.withExtraArgument=Wr;const Er=Hr;var Zn=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();globalThis&&globalThis.__generator;var Mt=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,i=t.length,a=e.length;r<i;r++,a++)e[a]=t[r];return e},Qn=Object.defineProperty,vr=Object.getOwnPropertySymbols,Jn=Object.prototype.hasOwnProperty,ei=Object.prototype.propertyIsEnumerable,Cr=function(e,t,r){return t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ti=function(e,t){for(var r in t||(t={}))Jn.call(t,r)&&Cr(e,r,t[r]);if(vr)for(var i=0,a=vr(t);i<a.length;i++){var r=a[i];ei.call(t,r)&&Cr(e,r,t[r])}return e},ri=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ot:ot.apply(null,arguments)};function ni(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var ii=function(e){Zn(t,e);function t(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Mt([void 0],r[0].concat(this)))):new(t.bind.apply(t,Mt([void 0],r.concat(this))))},t}(Array);function ai(e){return typeof e=="boolean"}function si(){return function(t){return li(t)}}function li(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var i=new ii;return r&&(ai(r)?i.push(Er):i.push(Er.withExtraArgument(r.extraArgument))),i}var oi=!0;function ci(e){var t=si(),r=e||{},i=r.reducer,a=i===void 0?void 0:i,s=r.middleware,l=s===void 0?t():s,o=r.devTools,u=o===void 0?!0:o,c=r.preloadedState,p=c===void 0?void 0:c,h=r.enhancers,m=h===void 0?void 0:h,g;if(typeof a=="function")g=a;else if(ni(a))g=Fr(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var d=l;typeof d=="function"&&(d=d(t));var y=qn.apply(void 0,d),C=ot;u&&(C=ri(ti({trace:!oi},typeof u=="object"&&u)));var A=[y];Array.isArray(m)?A=Mt([y],m):typeof m=="function"&&(A=m(A));var O=C.apply(void 0,A);return Gr(g,p,O)}$n();const ui={open:!0,type:window.innerWidth<1700?"temporary":"permanent"},di=(e=ui,t)=>{switch(t.type){case"OPEN_DRAWER":return{...e,open:!0};case"CLOSE_DRAWER":return{...e,open:!1};case"TOGGLE_DRAWER":return{...e,open:!e.open};default:return{...e}}},hi={shade:"Black",dicePool:1,obstacle:1,isOpenEnded:!1,isDoubleObstacle:!1,result:void 0},pi=(e=hi,t)=>{switch(t.type){case"CHANGE_DICE_ROLLER_SHADE":return{...e,shade:t.payload.shade};case"CHANGE_DICE_ROLLER_DICE_POOL":return{...e,dicePool:t.payload.dicePool};case"CHANGE_DICE_ROLLER_OBSTACLE":return{...e,obstacle:t.payload.obstacle};case"TOGGLE_DICE_ROLLER_IS_OPEN_ENDED":return{...e,isOpenEnded:!e.isOpenEnded};case"TOGGLE_DICE_ROLLER_IS_DOUBLE_OBSTACLE":return{...e,isDoubleObstacle:!e.isDoubleObstacle};case"SET_DICE_ROLLER_RESULT":return{...e,result:t.payload.result};default:return{...e}}},fi={volleyIndex:0,actions:[void 0,void 0,void 0],selectedAction:"Avoid the Topic"},mi=(e=fi,t)=>{switch(t.type){case"CHANGE_DUEL_OF_WITS_VOLLEY_INDEX":return{...e,volleyIndex:t.payload.volleyIndex};case"ADD_DUEL_OF_WITS_ACTION":const r=e.actions.map((l,o)=>o===t.payload.volleyIndex?t.payload.action:l);return{...e,actions:r};case"DELETE_DUEL_OF_WITS_ACTION":const i=e.actions.map((l,o)=>{if(o!==t.payload.volleyIndex)return l});return{...e,actions:i};case"CHANGE_DUEL_OF_WITS_SELECTED_ACTION":return{...e,selectedAction:t.payload.actionName};case"TOGGLE_DUEL_OF_WITS_ACTION_DETAILS":const a=e.actions.map((l,o)=>l&&o===t.payload.volleyIndex?{...l,open:!l.open}:l);return{...e,actions:a};case"TOGGLE_DUEL_OF_WITS_ACTION_VISIBILITY":const s=e.actions.map((l,o)=>l&&o===t.payload.volleyIndex?{...l,visible:!l.visible}:l);return{...e,actions:s};default:return{...e}}},gi={reflexes:3,volleyIndex:0,actions:[[],[],[]],selectedAction:"No Action"},yi=(e=gi,t)=>{switch(t.type){case"CHANGE_FIGHT_REFLEXES":return{...e,reflexes:t.payload.reflexes};case"CHANGE_FIGHT_VOLLEY_INDEX":return{...e,volleyIndex:t.payload.volleyIndex};case"ADD_FIGHT_ACTION":const r=e.actions.map((l,o)=>o===t.payload.volleyIndex?[...l,t.payload.action]:l);return{...e,actions:r};case"DELETE_FIGHT_ACTION":const i=e.actions.map((l,o)=>o===t.payload.volleyIndex?l.filter((u,c)=>c!==t.payload.actionIndex):l);return{...e,actions:i};case"CHANGE_FIGHT_SELECTED_ACTION":return{...e,selectedAction:t.payload.actionName};case"TOGGLE_FIGHT_ACTION_DETAILS":const a=e.actions.map((l,o)=>o===t.payload.volleyIndex?l.map((u,c)=>c===t.payload.actionIndex?{...u,open:!u.open}:u):l);return{...e,actions:a};case"TOGGLE_FIGHT_ACTION_VISIBILITY":const s=e.actions.map((l,o)=>o===t.payload.volleyIndex?l.map((u,c)=>c===t.payload.actionIndex?{...u,visible:!u.visible}:u):l);return{...e,actions:s};default:return{...e}}},xi={stock:"Dwarf",setting:"Artificer"},Ei=(e=xi,t)=>{switch(t.type){case"CHANGE_LIFEPATH_LIST_STOCK":const r=le[t.payload.stock].settings,i=Object.keys(r)[0];return{...e,stock:t.payload.stock,setting:i};case"CHANGE_LIFEPATH_LIST_SETTING":return{...e,setting:t.payload.setting};default:return{...e}}},vi={stock:"Random",setting:"Random",noDuplicates:!0,maxLeads:3,maxLifepaths:6,minLifepaths:5},Ci=(e=vi,t)=>{switch(t.type){case"CHANGE_LP_RANDOMIZER_STOCK":return{...e,stock:t.payload.stock};case"CHANGE_LP_RANDOMIZER_SETTING":return{...e,setting:t.payload.setting};case"TOGGLE_LP_RANDOMIZER_NO_DUPLICATES":return{...e,noDuplicates:!e.noDuplicates};case"CHANGE_LP_RANDOMIZER_MAX_LEADS":return{...e,maxLeads:t.payload.maxLeads};case"CHANGE_LP_RANDOMIZER_MAX_LIFEPATHS":return{...e,maxLifepaths:t.payload.maxLifepaths};case"CHANGE_LP_RANDOMIZER_MIN_LIFEPATHS":return{...e,minLifepaths:t.payload.minLifepaths};default:return{...e}}},bi={aoe:"Caster",element:"Anima",impetus:"Create",duration:"Instantaneous",origin:"Personal",direction:"Clockwise",steps:1,cover:!0,elementIndex:0},Ai=(e=bi,t)=>{switch(t.type){case"CHANGE_MAGIC_WHEEL_AOE":return{...e,aoe:t.payload.aoe};case"CHANGE_MAGIC_WHEEL_ELEMENT":return{...e,element:t.payload.element};case"CHANGE_MAGIC_WHEEL_IMPETUS":return{...e,impetus:t.payload.impetus};case"CHANGE_MAGIC_WHEEL_DURATION":return{...e,duration:t.payload.duration};case"CHANGE_MAGIC_WHEEL_ORIGIN":return{...e,origin:t.payload.origin};case"CHANGE_MAGIC_WHEEL_DIRECTION":return{...e,direction:t.payload.direction};case"CHANGE_MAGIC_WHEEL_STEPS":return{...e,steps:t.payload.steps};case"TOGGLE_MAGIC_WHEEL_COVER":return{...e,cover:!e.cover};case"CHANGE_MAGIC_WHEEL_ELEMENT_INDEX":return{...e,elementIndex:t.payload.elementIndex};default:return{...e}}},_i={days:6,hours:6,cells:[]},Ii=(e=_i,t)=>{switch(t.type){case"CHANGE_PRACTICE_PLANNER_DAYS":return{...e,days:t.payload.days};case"CHANGE_PRACTICE_PLANNER_HOURS":return{...e,hours:t.payload.hours};case"ADD_PRACTICE_PLANNER_CELLS":const r=[...Array(t.payload.days)].map(()=>({maxHours:t.payload.hours,remaining:t.payload.hours,placed:[]}));return{...e,cells:[...e.cells,...r]};case"DELETE_PRACTICE_PLANNER_CELL":const i=e.cells;return i.splice(t.payload.cellIndex,1),{...e,cells:[...i]};case"ADD_PRACTICE_PLANNER_PRACTICE":const a=e.cells.map((o,u)=>{if(u===t.payload.cellIndex){const c=[...o.placed,t.payload.practice],p=o.remaining-t.payload.practice.hours;return{...o,remaining:p,placed:c}}return o});return{...e,cells:a};case"DELETE_PRACTICE_PLANNER_PRACTICE":const s=e.cells.map((o,u)=>{if(u===t.payload.cellIndex){const c=o.placed.filter((h,m)=>m!==t.payload.practiceIndex),p=o.remaining+o.placed[t.payload.practiceIndex].hours;return{...o,remaining:p,placed:c}}return o});return{...e,cells:s};case"CHANGE_PRACTICE_PLANNER_CELL_HOURS":const l=e.cells.map((o,u)=>u===t.payload.cellIndex&&(o.maxHours<24&&t.payload.change>0||o.maxHours>1&&t.payload.change<0)?{...o,maxHours:o.maxHours+t.payload.change,remaining:o.remaining+t.payload.change}:o);return{...e,cells:l};default:return{...e}}},Si={volleyIndex:0,actions:[void 0,void 0,void 0],selectedAction:"Close"},Oi=(e=Si,t)=>{switch(t.type){case"CHANGE_RANGE_AND_COVER_VOLLEY_INDEX":return{...e,volleyIndex:t.payload.volleyIndex};case"ADD_RANGE_AND_COVER_ACTION":const r=e.actions.map((l,o)=>o===t.payload.volleyIndex?t.payload.action:l);return{...e,actions:r};case"DELETE_RANGE_AND_COVER_ACTION":const i=e.actions.map((l,o)=>{if(o!==t.payload.volleyIndex)return l});return{...e,actions:i};case"CHANGE_RANGE_AND_COVER_SELECTED_ACTION":return{...e,selectedAction:t.payload.actionName};case"TOGGLE_RANGE_AND_COVER_ACTION_DETAILS":const a=e.actions.map((l,o)=>l&&o===t.payload.volleyIndex?{...l,open:!l.open}:l);return{...e,actions:a};case"TOGGLE_RANGE_AND_COVER_ACTION_VISIBILITY":const s=e.actions.map((l,o)=>l&&o===t.payload.volleyIndex?{...l,visible:!l.visible}:l);return{...e,actions:s};default:return{...e}}},Ti={category:"Any General"},wi=(e=Ti,t)=>{switch(t.type){case"CHANGE_SKILL_LIST_CATEGORY":return{...e,category:t.payload.category};default:return{...e}}},Li={category:"Any Character"},Pi=(e=Li,t)=>{switch(t.type){case"CHANGE_TRAIT_LIST_CATEGORY":return{...e,category:t.payload.category};default:return{...e}}},Ri={stock:"Dwarf"},Ni=(e=Ri,t)=>{switch(t.type){case"CHANGE_RESOURCE_LIST_STOCK":return{...e,stock:t.payload.stock};default:return{...e}}},ki={datasets:["bwg","bwc"]},Di=(e=ki,t)=>{switch(t.type){case"TOGGLE_DATASET":return e.datasets.includes(t.payload.dataset)?{...e,datasets:e.datasets.filter(r=>r!=t.payload.dataset)}:{...e,datasets:[...e.datasets,t.payload.dataset]};default:return{...e}}},Mi=ci({reducer:Fr({dataset:Di,drawer:di,diceRoller:pi,lifepathList:Ei,skillList:wi,traitList:Pi,resourceList:Ni,magicWheel:Ai,lifepathRandomizer:Ci,practicePlanner:Ii,duelOfWits:mi,rangeAndCover:Oi,fight:yi})}),Gi=Jr,z=en;function he(e,t){return e-1+Math.ceil(Math.random()*(t-e+1))}function ye(e,t,r){const i=isNaN(e)?t:e;return Math.min(Math.max(i,t),r)}function br(e){const t=e%10,r=e%100;return t===1&&r!==11?`${e}st`:t===2&&r!==12?`${e}nd`:t===3&&r!==13?`${e}rd`:`${e}th`}function Fi(e,t,r){const i=e.split("\u279E");if(i[t].includes("*")){const a=parseInt(i[t][0]),s=i[t-1].includes(" ")?i[t-1].split(" ")[1].toLowerCase():i[t-1],l=r?a>1?` ${r[1]}`:` ${r[0]}`:"";if(i[t].includes("*-"))return`${a} ${s}-type${l}`;if(i[t].includes("*ANY"))return`any ${a} ${s}${l}`;if(i[t].includes("*"))return`${a} ${i[t].split("*")[1]}${l}`}return i[t]}const jr=(e,t)=>e.reduce((r,i)=>{const a=t(i);return r[a]||(r[a]=[]),r[a].push(i),r},{});function Ge({text:e,severity:t,onClose:r}){return n(cn,{open:!0,autoHideDuration:5e3,onClose:r,anchorOrigin:{vertical:"top",horizontal:"center"},children:n(Le,{severity:t,sx:{width:"100%"},children:e})})}function ee(){const e=Gi(),t={dtsToggleDataset:d=>{e({type:"TOGGLE_DATASET",payload:{dataset:d}})}},r={drwToggleDrawer:()=>{e({type:"TOGGLE_DRAWER"})},drwCloseDrawer:()=>{e({type:"CLOSE_DRAWER"})}},i={dirChangeShade:d=>{e({type:"CHANGE_DICE_ROLLER_SHADE",payload:{shade:d}})},dirChangeDicePool:d=>{const y=ye(d,0,50);e({type:"CHANGE_DICE_ROLLER_DICE_POOL",payload:{dicePool:y}})},dirChangeObstacle:d=>{const y=ye(d,0,50);e({type:"CHANGE_DICE_ROLLER_OBSTACLE",payload:{obstacle:y}})},dirToggleIsOpenEnded:()=>{e({type:"TOGGLE_DICE_ROLLER_IS_OPEN_ENDED"})},dirToggleIsDoubleObstacle:()=>{e({type:"TOGGLE_DICE_ROLLER_IS_DOUBLE_OBSTACLE"})},dirSetResult:(d,y,C,A,O)=>{e({type:"SET_DICE_ROLLER_RESULT",payload:{result:{dice:d,successes:y,failures:C,test:A,usedFate:O}}})}},a={lplChangeStock:d=>{e({type:"CHANGE_LIFEPATH_LIST_STOCK",payload:{stock:d.target.value}})},lplChangeSetting:d=>{e({type:"CHANGE_LIFEPATH_LIST_SETTING",payload:{setting:d.target.value}})}},s={sklChangeCategory:d=>{e({type:"CHANGE_SKILL_LIST_CATEGORY",payload:{category:d.target.value}})}},l={trtChangeCategory:d=>{e({type:"CHANGE_TRAIT_LIST_CATEGORY",payload:{category:d.target.value}})}},o={rscChangeStock:d=>{e({type:"CHANGE_RESOURCE_LIST_STOCK",payload:{stock:d.target.value}})}},u={lprChangeStock:d=>{e({type:"CHANGE_LP_RANDOMIZER_STOCK",payload:{stock:d.target.value}})},lprChangeMaxLeads:d=>{const y=ye(d.target.value===""?0:parseInt(d.target.value),0,10);e({type:"CHANGE_LP_RANDOMIZER_MAX_LEADS",payload:{maxLeads:y}})},lprChangeMaxLPs:d=>{const y=ye(d.target.value===""?0:parseInt(d.target.value),0,10);e({type:"CHANGE_LP_RANDOMIZER_MAX_LIFEPATHS",payload:{maxLifepaths:y}})},lprChangeMinLPs:d=>{const y=ye(d.target.value===""?0:parseInt(d.target.value),0,10);e({type:"CHANGE_LP_RANDOMIZER_MIN_LIFEPATHS",payload:{minLifepaths:y}})},lprToggleNoDuplicates:()=>{e({type:"TOGGLE_LP_RANDOMIZER_NO_DUPLICATES"})}},c={prpChangeDays:d=>{const y=ye(d.target.value===""?0:parseInt(d.target.value),0,30);e({type:"CHANGE_PRACTICE_PLANNER_DAYS",payload:{days:y}})},prpChangeHours:d=>{const y=ye(d.target.value===""?0:parseInt(d.target.value),1,24);e({type:"CHANGE_PRACTICE_PLANNER_HOURS",payload:{hours:y}})},prpAddCells:(d,y)=>{e({type:"ADD_PRACTICE_PLANNER_CELLS",payload:{days:d,hours:y}})},prpDeleteCell:d=>{e({type:"DELETE_PRACTICE_PLANNER_CELL",payload:{cellIndex:d}})},prpChangeCellHour:(d,y,C,A)=>{C[d].remaining===0&&y===-1?A(n(Ge,{text:"Cannot reduce hours from day. It is used by practices.",severity:"error",onClose:()=>A(null)})):(e({type:"CHANGE_PRACTICE_PLANNER_CELL_HOURS",payload:{cellIndex:d,change:y}}),A(null))},prpAddPractice:(d,y,C)=>{d.preventDefault();const A=Object.values(d.target.elements),[O,_,R,L]=A.filter(T=>T.tagName==="INPUT"&&T.type==="text").map(T=>T.value),v=Pt[_][R],I=parseInt(O);if(L==="")C(n(Ge,{text:"Please enter a Skill name.",severity:"error",onClose:()=>C(null)}));else if(y[I].remaining-v<0)C(n(Ge,{text:`Cannot fit practice into the day. This practice takes ${v} hours.`,severity:"error",onClose:()=>C(null)}));else{const T={skillName:L,skillType:_,testType:R,hours:Pt[_][R]};e({type:"ADD_PRACTICE_PLANNER_PRACTICE",payload:{cellIndex:I,practice:T}}),C(null)}},prpDeletePractice:(d,y)=>{e({type:"DELETE_PRACTICE_PLANNER_PRACTICE",payload:{cellIndex:d,practiceIndex:y}})}},p={mgwChangeAOE:E.exports.useCallback(d=>{const y=typeof d=="string"?d:d.target.value;e({type:"CHANGE_MAGIC_WHEEL_AOE",payload:{aoe:y}})},[e]),mgwChangeElement:E.exports.useCallback(d=>{const y=typeof d=="string"?d:d.target.value;e({type:"CHANGE_MAGIC_WHEEL_ELEMENT",payload:{element:y}})},[e]),mgwChangeImpetus:E.exports.useCallback(d=>{const y=typeof d=="string"?d:d.target.value;e({type:"CHANGE_MAGIC_WHEEL_IMPETUS",payload:{impetus:y}})},[e]),mgwChangeDuration:E.exports.useCallback(d=>{const y=typeof d=="string"?d:d.target.value;e({type:"CHANGE_MAGIC_WHEEL_DURATION",payload:{duration:y}})},[e]),mgwChangeOrigin:E.exports.useCallback(d=>{const y=typeof d=="string"?d:d.target.value;e({type:"CHANGE_MAGIC_WHEEL_ORIGIN",payload:{origin:y}})},[e]),mgwChangeDirection:E.exports.useCallback(d=>{e({type:"CHANGE_MAGIC_WHEEL_DIRECTION",payload:{direction:d.target.value}})},[e]),mgwChangeSteps:E.exports.useCallback(d=>{const y=ye(d.target.value===""?0:parseInt(d.target.value),0,10);e({type:"CHANGE_MAGIC_WHEEL_STEPS",payload:{steps:y}})},[e]),mgwToggleCover:E.exports.useCallback(()=>{e({type:"TOGGLE_MAGIC_WHEEL_COVER"})},[e]),mgwChangeElementIndex:E.exports.useCallback(d=>{e({type:"CHANGE_MAGIC_WHEEL_ELEMENT_INDEX",payload:{elementIndex:d}})},[e])};return{dataset:t,drawer:r,diceRoller:i,lifepathList:a,skillList:s,traitList:l,resourceList:o,lifepathRandomizer:u,practicePlanner:c,magicWheel:p,duelOfWits:{dowChangeVolleyIndex:d=>{e({type:"CHANGE_DUEL_OF_WITS_VOLLEY_INDEX",payload:{volleyIndex:d}})},dowAddAction:(d,y)=>{const C={...Kt.find(A=>A.name===y),open:!1,visible:!0};e({type:"ADD_DUEL_OF_WITS_ACTION",payload:{volleyIndex:d,action:C}})},dowDeleteAction:d=>{e({type:"DELETE_DUEL_OF_WITS_ACTION",payload:{volleyIndex:d}})},dowSelectedChangeAction:(d,y)=>{e({type:"CHANGE_DUEL_OF_WITS_SELECTED_ACTION",payload:{volleyIndex:d,actionName:y}})},dowToggleActionDetails:d=>{e({type:"TOGGLE_DUEL_OF_WITS_ACTION_DETAILS",payload:{volleyIndex:d}})},dowToggleActionVisibility:d=>{e({type:"TOGGLE_DUEL_OF_WITS_ACTION_VISIBILITY",payload:{volleyIndex:d}})}},rangeAndCover:{racChangeVolleyIndex:d=>{e({type:"CHANGE_RANGE_AND_COVER_VOLLEY_INDEX",payload:{volleyIndex:d}})},racAddAction:(d,y)=>{const C={...Yt.find(A=>A.name===y),open:!1,visible:!0};e({type:"ADD_RANGE_AND_COVER_ACTION",payload:{volleyIndex:d,action:C}})},racDeleteAction:d=>{e({type:"DELETE_RANGE_AND_COVER_ACTION",payload:{volleyIndex:d}})},racSelectedChangeAction:(d,y)=>{e({type:"CHANGE_RANGE_AND_COVER_SELECTED_ACTION",payload:{volleyIndex:d,actionName:y}})},racToggleActionDetails:d=>{e({type:"TOGGLE_RANGE_AND_COVER_ACTION_DETAILS",payload:{volleyIndex:d}})},racToggleActionVisibility:d=>{e({type:"TOGGLE_RANGE_AND_COVER_ACTION_VISIBILITY",payload:{volleyIndex:d}})}},fight:{fgtChangeReflexes:(d,y,C)=>{if(y.flat().filter(O=>O.name!=="No Action").length>d)C(n(Ge,{text:"Cannot decrease reflex. Remove some actions and try again.",severity:"error",onClose:()=>C(null)}));else{const O=ye(d,0,12);e({type:"CHANGE_FIGHT_REFLEXES",payload:{reflexes:O}}),C(null)}},fgtChangeVolleyIndex:d=>{e({type:"CHANGE_FIGHT_VOLLEY_INDEX",payload:{volleyIndex:d}})},fgtAddAction:(d,y,C,A,O)=>{const _=[A[0].filter(L=>L.name!=="No Action").length,A[1].filter(L=>L.name!=="No Action").length,A[2].filter(L=>L.name!=="No Action").length];if(A.flat().filter(L=>L.name!=="No Action").length===C&&y!=="No Action")O(n(Ge,{text:"Cannot add action because reflex maximum is reached.",severity:"error",onClose:()=>O(null)}));else if(_[d]>Math.min(..._))O(n(Ge,{text:"Cannot add action because volleys would be uneven.",severity:"error",onClose:()=>O(null)}));else{const L={...Rr.find(v=>v.name===y),open:!1,visible:!0};e({type:"ADD_FIGHT_ACTION",payload:{volleyIndex:d,action:L}}),O(null)}},fgtDeleteAction:(d,y)=>{e({type:"DELETE_FIGHT_ACTION",payload:{volleyIndex:d,actionIndex:y}})},fgtChangeSelectedAction:(d,y)=>{e({type:"CHANGE_FIGHT_SELECTED_ACTION",payload:{volleyIndex:d,actionName:y}})},fgtToggleActionDetails:(d,y)=>{e({type:"TOGGLE_FIGHT_ACTION_DETAILS",payload:{volleyIndex:d,actionIndex:y}})},fgtToggleActionVisibility:(d,y)=>{e({type:"TOGGLE_FIGHT_ACTION_VISIBILITY",payload:{volleyIndex:d,actionIndex:y}})}}}}function j({children:e,columns:t,center:r,spacing:i,sx:a}){let s={};return r===!0?s={justifyContent:"space-between",alignItems:"center"}:r==="h"?s={justifyContent:"space-between"}:r==="v"&&(s={alignItems:"center"}),n(x,{container:!0,columns:t,spacing:i||1,sx:{marginTop:1,...a},...s,children:e})}function Wi({item:e,icon:t}){const r=E.exports.useMemo(()=>E.exports.forwardRef(function(a,s){return n(tn,{to:e[1],ref:s,...a,role:void 0})}),[e]);return f(hn,{component:r,button:!0,children:[t?n(pn,{children:t}):null,n(Ze,{primary:e[0]})]},e[0])}const Hi=[[["Dice Roller","/diceroller"]],[["Lifepaths","/lifepaths"],["Skills","/skills"],["Traits","/traits"],["Resources","/resources"]],[["Lifepath Randomizer","/lprandomizer"],["Practice Planner","/practiceplanner"],["Magic Wheel","/magicwheel"]],[["Duel of Wits Planner","/dowplanner"],["Range and Cover Planner","/racplanner"],["Fight Planner","/fightplanner"]]];function ji(){const{datasets:e}=z(l=>l.dataset),{open:t,type:r}=z(l=>l.drawer),{drwCloseDrawer:i}=ee().drawer,{dtsToggleDataset:a}=ee().dataset,s=()=>{r!=="persistent"&&i()};return f(un,{anchor:"left",variant:r,open:t,hideBackdrop:r==="persistent",onClose:s,sx:{background:"paper"},PaperProps:{elevation:2},children:[f(N,{sx:{width:250,height:"100%"},onClick:s,onKeyDown:s,children:[n(b,{variant:"h4",sx:{padding:"10px 10px"},children:"BWGR Tools"}),Hi.map((l,o)=>f(E.exports.Fragment,{children:[n(Z,{}),l.map((u,c)=>n(Wi,{item:u},c))]},o)),n(Z,{})]}),f(N,{sx:{width:250,position:"absolute",bottom:"0"},onClick:s,onKeyDown:s,children:[n(Z,{}),f(j,{columns:3,sx:{overflow:"hidden",marginTop:"-3px"},center:!0,children:[n(x,{item:!0,xs:1,children:n(Te,{label:"Core",labelPlacement:"top",checked:e.includes("bwg"),control:n(bt,{color:"primary"}),onChange:()=>a("bwg")})}),n(x,{item:!0,xs:1,children:n(Te,{label:"Codex",labelPlacement:"top",checked:e.includes("bwc"),control:n(bt,{color:"primary"}),onChange:()=>a("bwc")})}),n(x,{item:!0,xs:1,children:n(Te,{label:"Misc",labelPlacement:"top",checked:e.includes("msc"),control:n(bt,{color:"primary"}),onChange:()=>a("msc")})})]}),n(Z,{}),n(J,{href:"https://github.com/yigitlevent/bwgr-tools",sx:{padding:1,margin:"6px 10px"},children:n(dn,{})})]})]})}function $i(){const{shade:e,dicePool:t,obstacle:r,isOpenEnded:i,isDoubleObstacle:a,result:s}=z(_=>_.diceRoller),{dirChangeShade:l,dirChangeDicePool:o,dirChangeObstacle:u,dirToggleIsOpenEnded:c,dirToggleIsDoubleObstacle:p,dirSetResult:h}=ee().diceRoller,m=(_,R)=>{let L=0,v=0;_.forEach(T=>{e==="Black"&&T>3||e==="Gray"&&T>2||e==="White"&&T>1?L+=1:v+=1});const I=t===1&&r===1?"Routine or Difficult":r>t?"Challenging":Ln[t].routineMaxObstacle<=r?"Routine":"Difficult";h(_,L,v,I,R)},g=_=>{const R=[..._],L=R.findIndex(v=>e==="Black"&&v<4||e==="Gray"&&v<3||e==="White"&&v<2);R[L]=he(1,6),m(R.sort((v,I)=>I-v),!0)},d=(_,R)=>{const L=[];if(i||R)for(L.push(_.filter(v=>v===6).map(()=>he(1,6)));L[L.length-1].filter(v=>v===6).length>0;)L.push(L[L.length-1].filter(v=>v===6).map(()=>he(1,6)));m([..._,...L.flat()].sort((v,I)=>I-v),R)},y=()=>{d([...Array(t)].map(()=>he(1,6)),!1)},C=_=>{const R=a?r*2:r,L=_.successes>R?`Success with a margin of ${_.successes-R}.`:_.successes<R?`Failure with a margin of ${R-_.successes}.`:"Tie.";return f(E.exports.Fragment,{children:[n(b,{variant:"h6",children:"Result"}),n(b,{children:L})]})},A=_=>{const R=()=>_.dice.map((L,v)=>L===1?n(fn,{color:"error",sx:{margin:"0 0 -6px"}},v):L===2?n(mn,{color:e==="White"?"success":"error",sx:{margin:"0 0 -6px"}},v):L===3?n(gn,{color:e==="Gray"?"success":"error",sx:{margin:"0 0 -6px"}},v):L===4?n(yn,{color:"success",sx:{margin:"0 0 -6px"}},v):L===5?n(xn,{color:"success",sx:{margin:"0 0 -6px"}},v):n(En,{color:"success",sx:{margin:"0 0 -6px"}},v));return f(E.exports.Fragment,{children:[n(b,{variant:"h6",children:"Dice"}),n(b,{children:R()})]})},O=_=>f(E.exports.Fragment,{children:[n(b,{variant:"h6",children:"Test"}),n(b,{children:_.test})]});return f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Dice Roller"}),f(j,{columns:6,center:!0,children:[n(x,{item:!0,xs:6,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Shade"}),f(W,{value:e,onChange:_=>l(_.target.value),children:[n(P,{value:"Black",children:"Black"}),n(P,{value:"Gray",children:"Gray"}),n(P,{value:"White",children:"White"})]})]})}),n(x,{item:!0,xs:6,sm:2,md:1,children:n(re,{label:"Dice Pool",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:t,onChange:_=>o(parseInt(_.target.value)),fullWidth:!0,variant:"standard"})}),n(x,{item:!0,xs:6,sm:2,md:1,children:n(re,{label:"Obstacle",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:r,onChange:_=>u(parseInt(_.target.value)),fullWidth:!0,variant:"standard"})}),n(x,{item:!0,children:n(Te,{label:"Is Open Ended?",labelPlacement:"start",control:n(be,{checked:i,onChange:c})})}),n(x,{item:!0,children:n(Te,{label:"Is Double Obstacle?",labelPlacement:"start",control:n(be,{checked:a,onChange:p})})}),n(x,{item:!0,children:n(de,{variant:"outlined",size:"medium",onClick:y,children:"Roll Dice"})})]}),s?f(j,{columns:3,children:[n(x,{item:!0,xs:3,sm:1,children:C(s)}),f(x,{item:!0,xs:3,sm:1,children:[A(s),!i&&s.dice.includes(6)&&!s.usedFate?n(de,{variant:"outlined",size:"medium",onClick:()=>d(s.dice,!0),sx:{margin:"24px 0 0"},children:"Reroll sixes using Fate"}):null,i&&s.failures>0&&!s.usedFate?n(de,{variant:"outlined",size:"medium",onClick:()=>g(s.dice),sx:{margin:"6px 0 0"},children:"Reroll a single failure using Fate"}):null]}),n(x,{item:!0,xs:3,sm:1,children:O(s)})]}):null]})}function te(e,t){return e.some(r=>t.includes(r))}function Ee(e){return Array.isArray?Array.isArray(e):Vr(e)==="[object Array]"}const zi=1/0;function Vi(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-zi?"-0":t}function Bi(e){return e==null?"":Vi(e)}function fe(e){return typeof e=="string"}function $r(e){return typeof e=="number"}function Ui(e){return e===!0||e===!1||Ki(e)&&Vr(e)=="[object Boolean]"}function zr(e){return typeof e=="object"}function Ki(e){return zr(e)&&e!==null}function ie(e){return e!=null}function Lt(e){return!e.trim().length}function Vr(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Yi="Incorrect 'index' type",Xi=e=>`Invalid value for key ${e}`,qi=e=>`Pattern length exceeds max of ${e}.`,Zi=e=>`Missing ${e} property in key`,Qi=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ar=Object.prototype.hasOwnProperty;class Ji{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(i=>{let a=Br(i);r+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(i=>{i.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Br(e){let t=null,r=null,i=null,a=1,s=null;if(fe(e)||Ee(e))i=e,t=_r(e),r=Gt(e);else{if(!Ar.call(e,"name"))throw new Error(Zi("name"));const l=e.name;if(i=l,Ar.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(Qi(l));t=_r(l),r=Gt(l),s=e.getFn}return{path:t,id:r,weight:a,src:i,getFn:s}}function _r(e){return Ee(e)?e:e.split(".")}function Gt(e){return Ee(e)?e.join("."):e}function ea(e,t){let r=[],i=!1;const a=(s,l,o)=>{if(!!ie(s))if(!l[o])r.push(s);else{let u=l[o];const c=s[u];if(!ie(c))return;if(o===l.length-1&&(fe(c)||$r(c)||Ui(c)))r.push(Bi(c));else if(Ee(c)){i=!0;for(let p=0,h=c.length;p<h;p+=1)a(c[p],l,o+1)}else l.length&&a(c,l,o+1)}};return a(e,fe(t)?t.split("."):t,0),i?r:r[0]}const ta={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ra={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},na={location:0,threshold:.6,distance:100},ia={useExtendedSearch:!1,getFn:ea,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var w={...ra,...ta,...na,...ia};const aa=/[^ ]+/g;function sa(e=1,t=3){const r=new Map,i=Math.pow(10,t);return{get(a){const s=a.match(aa).length;if(r.has(s))return r.get(s);const l=1/Math.pow(s,.5*e),o=parseFloat(Math.round(l*i)/i);return r.set(s,o),o},clear(){r.clear()}}}class tr{constructor({getFn:t=w.getFn,fieldNormWeight:r=w.fieldNormWeight}={}){this.norm=sa(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,i)=>{this._keysMap[r.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,fe(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();fe(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,i=this.size();r<i;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!ie(t)||Lt(t))return;let i={v:t,i:r,n:this.norm.get(t)};this.records.push(i)}_addObject(t,r){let i={i:r,$:{}};this.keys.forEach((a,s)=>{let l=a.getFn?a.getFn(t):this.getFn(t,a.path);if(!!ie(l)){if(Ee(l)){let o=[];const u=[{nestedArrIndex:-1,value:l}];for(;u.length;){const{nestedArrIndex:c,value:p}=u.pop();if(!!ie(p))if(fe(p)&&!Lt(p)){let h={v:p,i:c,n:this.norm.get(p)};o.push(h)}else Ee(p)&&p.forEach((h,m)=>{u.push({nestedArrIndex:m,value:h})})}i.$[s]=o}else if(fe(l)&&!Lt(l)){let o={v:l,n:this.norm.get(l)};i.$[s]=o}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Ur(e,t,{getFn:r=w.getFn,fieldNormWeight:i=w.fieldNormWeight}={}){const a=new tr({getFn:r,fieldNormWeight:i});return a.setKeys(e.map(Br)),a.setSources(t),a.create(),a}function la(e,{getFn:t=w.getFn,fieldNormWeight:r=w.fieldNormWeight}={}){const{keys:i,records:a}=e,s=new tr({getFn:t,fieldNormWeight:r});return s.setKeys(i),s.setIndexRecords(a),s}function rt(e,{errors:t=0,currentLocation:r=0,expectedLocation:i=0,distance:a=w.distance,ignoreLocation:s=w.ignoreLocation}={}){const l=t/e.length;if(s)return l;const o=Math.abs(i-r);return a?l+o/a:o?1:l}function oa(e=[],t=w.minMatchCharLength){let r=[],i=-1,a=-1,s=0;for(let l=e.length;s<l;s+=1){let o=e[s];o&&i===-1?i=s:!o&&i!==-1&&(a=s-1,a-i+1>=t&&r.push([i,a]),i=-1)}return e[s-1]&&s-i>=t&&r.push([i,s-1]),r}const Oe=32;function ca(e,t,r,{location:i=w.location,distance:a=w.distance,threshold:s=w.threshold,findAllMatches:l=w.findAllMatches,minMatchCharLength:o=w.minMatchCharLength,includeMatches:u=w.includeMatches,ignoreLocation:c=w.ignoreLocation}={}){if(t.length>Oe)throw new Error(qi(Oe));const p=t.length,h=e.length,m=Math.max(0,Math.min(i,h));let g=s,d=m;const y=o>1||u,C=y?Array(h):[];let A;for(;(A=e.indexOf(t,d))>-1;){let I=rt(t,{currentLocation:A,expectedLocation:m,distance:a,ignoreLocation:c});if(g=Math.min(I,g),d=A+p,y){let T=0;for(;T<p;)C[A+T]=1,T+=1}}d=-1;let O=[],_=1,R=p+h;const L=1<<p-1;for(let I=0;I<p;I+=1){let T=0,k=R;for(;T<k;)rt(t,{errors:I,currentLocation:m+k,expectedLocation:m,distance:a,ignoreLocation:c})<=g?T=k:R=k,k=Math.floor((R-T)/2+T);R=k;let D=Math.max(1,m-k+1),Q=l?h:Math.min(m+k,h)+p,K=Array(Q+2);K[Q+1]=(1<<I)-1;for(let M=Q;M>=D;M-=1){let V=M-1,ve=r[e.charAt(V)];if(y&&(C[V]=+!!ve),K[M]=(K[M+1]<<1|1)&ve,I&&(K[M]|=(O[M+1]|O[M])<<1|1|O[M+1]),K[M]&L&&(_=rt(t,{errors:I,currentLocation:V,expectedLocation:m,distance:a,ignoreLocation:c}),_<=g)){if(g=_,d=V,d<=m)break;D=Math.max(1,2*m-d)}}if(rt(t,{errors:I+1,currentLocation:m,expectedLocation:m,distance:a,ignoreLocation:c})>g)break;O=K}const v={isMatch:d>=0,score:Math.max(.001,_)};if(y){const I=oa(C,o);I.length?u&&(v.indices=I):v.isMatch=!1}return v}function ua(e){let t={};for(let r=0,i=e.length;r<i;r+=1){const a=e.charAt(r);t[a]=(t[a]||0)|1<<i-r-1}return t}class Kr{constructor(t,{location:r=w.location,threshold:i=w.threshold,distance:a=w.distance,includeMatches:s=w.includeMatches,findAllMatches:l=w.findAllMatches,minMatchCharLength:o=w.minMatchCharLength,isCaseSensitive:u=w.isCaseSensitive,ignoreLocation:c=w.ignoreLocation}={}){if(this.options={location:r,threshold:i,distance:a,includeMatches:s,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const p=(m,g)=>{this.chunks.push({pattern:m,alphabet:ua(m),startIndex:g})},h=this.pattern.length;if(h>Oe){let m=0;const g=h%Oe,d=h-g;for(;m<d;)p(this.pattern.substr(m,Oe),m),m+=Oe;if(g){const y=h-Oe;p(this.pattern.substr(y),y)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,includeMatches:i}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let d={isMatch:!0,score:0};return i&&(d.indices=[[0,t.length-1]]),d}const{location:a,distance:s,threshold:l,findAllMatches:o,minMatchCharLength:u,ignoreLocation:c}=this.options;let p=[],h=0,m=!1;this.chunks.forEach(({pattern:d,alphabet:y,startIndex:C})=>{const{isMatch:A,score:O,indices:_}=ca(t,d,y,{location:a+C,distance:s,threshold:l,findAllMatches:o,minMatchCharLength:u,includeMatches:i,ignoreLocation:c});A&&(m=!0),h+=O,A&&_&&(p=[...p,..._])});let g={isMatch:m,score:m?h/this.chunks.length:1};return m&&i&&(g.indices=p),g}}class Ae{constructor(t){this.pattern=t}static isMultiMatch(t){return Ir(t,this.multiRegex)}static isSingleMatch(t){return Ir(t,this.singleRegex)}search(){}}function Ir(e,t){const r=e.match(t);return r?r[1]:null}class da extends Ae{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class ha extends Ae{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class pa extends Ae{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class fa extends Ae{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class ma extends Ae{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class ga extends Ae{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Yr extends Ae{constructor(t,{location:r=w.location,threshold:i=w.threshold,distance:a=w.distance,includeMatches:s=w.includeMatches,findAllMatches:l=w.findAllMatches,minMatchCharLength:o=w.minMatchCharLength,isCaseSensitive:u=w.isCaseSensitive,ignoreLocation:c=w.ignoreLocation}={}){super(t),this._bitapSearch=new Kr(t,{location:r,threshold:i,distance:a,includeMatches:s,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Xr extends Ae{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,i;const a=[],s=this.pattern.length;for(;(i=t.indexOf(this.pattern,r))>-1;)r=i+s,a.push([i,r-1]);const l=!!a.length;return{isMatch:l,score:l?0:1,indices:a}}}const Ft=[da,Xr,pa,fa,ga,ma,ha,Yr],Sr=Ft.length,ya=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,xa="|";function Ea(e,t={}){return e.split(xa).map(r=>{let i=r.trim().split(ya).filter(s=>s&&!!s.trim()),a=[];for(let s=0,l=i.length;s<l;s+=1){const o=i[s];let u=!1,c=-1;for(;!u&&++c<Sr;){const p=Ft[c];let h=p.isMultiMatch(o);h&&(a.push(new p(h,t)),u=!0)}if(!u)for(c=-1;++c<Sr;){const p=Ft[c];let h=p.isSingleMatch(o);if(h){a.push(new p(h,t));break}}}return a})}const va=new Set([Yr.type,Xr.type]);class Ca{constructor(t,{isCaseSensitive:r=w.isCaseSensitive,includeMatches:i=w.includeMatches,minMatchCharLength:a=w.minMatchCharLength,ignoreLocation:s=w.ignoreLocation,findAllMatches:l=w.findAllMatches,location:o=w.location,threshold:u=w.threshold,distance:c=w.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:i,minMatchCharLength:a,findAllMatches:l,ignoreLocation:s,location:o,threshold:u,distance:c},this.pattern=r?t:t.toLowerCase(),this.query=Ea(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let s=0,l=[],o=0;for(let u=0,c=r.length;u<c;u+=1){const p=r[u];l.length=0,s=0;for(let h=0,m=p.length;h<m;h+=1){const g=p[h],{isMatch:d,indices:y,score:C}=g.search(t);if(d){if(s+=1,o+=C,i){const A=g.constructor.type;va.has(A)?l=[...l,...y]:l.push(y)}}else{o=0,s=0,l.length=0;break}}if(s){let h={isMatch:!0,score:o/s};return i&&(h.indices=l),h}}return{isMatch:!1,score:1}}}const Wt=[];function ba(...e){Wt.push(...e)}function Ht(e,t){for(let r=0,i=Wt.length;r<i;r+=1){let a=Wt[r];if(a.condition(e,t))return new a(e,t)}return new Kr(e,t)}const ct={AND:"$and",OR:"$or"},jt={PATH:"$path",PATTERN:"$val"},$t=e=>!!(e[ct.AND]||e[ct.OR]),Aa=e=>!!e[jt.PATH],_a=e=>!Ee(e)&&zr(e)&&!$t(e),Or=e=>({[ct.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function qr(e,t,{auto:r=!0}={}){const i=a=>{let s=Object.keys(a);const l=Aa(a);if(!l&&s.length>1&&!$t(a))return i(Or(a));if(_a(a)){const u=l?a[jt.PATH]:s[0],c=l?a[jt.PATTERN]:a[u];if(!fe(c))throw new Error(Xi(u));const p={keyId:Gt(u),pattern:c};return r&&(p.searcher=Ht(c,t)),p}let o={children:[],operator:s[0]};return s.forEach(u=>{const c=a[u];Ee(c)&&c.forEach(p=>{o.children.push(i(p))})}),o};return $t(e)||(e=Or(e)),i(e)}function Ia(e,{ignoreFieldNorm:t=w.ignoreFieldNorm}){e.forEach(r=>{let i=1;r.matches.forEach(({key:a,norm:s,score:l})=>{const o=a?a.weight:null;i*=Math.pow(l===0&&o?Number.EPSILON:l,(o||1)*(t?1:s))}),r.score=i})}function Sa(e,t){const r=e.matches;t.matches=[],ie(r)&&r.forEach(i=>{if(!ie(i.indices)||!i.indices.length)return;const{indices:a,value:s}=i;let l={indices:a,value:s};i.key&&(l.key=i.key.src),i.idx>-1&&(l.refIndex=i.idx),t.matches.push(l)})}function Oa(e,t){t.score=e.score}function Ta(e,t,{includeMatches:r=w.includeMatches,includeScore:i=w.includeScore}={}){const a=[];return r&&a.push(Sa),i&&a.push(Oa),e.map(s=>{const{idx:l}=s,o={item:t[l],refIndex:l};return a.length&&a.forEach(u=>{u(s,o)}),o})}class $e{constructor(t,r={},i){this.options={...w,...r},this.options.useExtendedSearch,this._keyStore=new Ji(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof tr))throw new Error(Yi);this._myIndex=r||Ur(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!ie(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,a=this._docs.length;i<a;i+=1){const s=this._docs[i];t(s,i)&&(this.removeAt(i),i-=1,a-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:s,sortFn:l,ignoreFieldNorm:o}=this.options;let u=fe(t)?fe(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ia(u,{ignoreFieldNorm:o}),s&&u.sort(l),$r(r)&&r>-1&&(u=u.slice(0,r)),Ta(u,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(t){const r=Ht(t,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:s,i:l,n:o})=>{if(!ie(s))return;const{isMatch:u,score:c,indices:p}=r.searchIn(s);u&&a.push({item:s,idx:l,matches:[{score:c,value:s,norm:o,indices:p}]})}),a}_searchLogical(t){const r=qr(t,this.options),i=(o,u,c)=>{if(!o.children){const{keyId:h,searcher:m}=o,g=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(u,h),searcher:m});return g&&g.length?[{idx:c,item:u,matches:g}]:[]}const p=[];for(let h=0,m=o.children.length;h<m;h+=1){const g=o.children[h],d=i(g,u,c);if(d.length)p.push(...d);else if(o.operator===ct.AND)return[]}return p},a=this._myIndex.records,s={},l=[];return a.forEach(({$:o,i:u})=>{if(ie(o)){let c=i(r,o,u);c.length&&(s[u]||(s[u]={idx:u,item:o,matches:[]},l.push(s[u])),c.forEach(({matches:p})=>{s[u].matches.push(...p)}))}}),l}_searchObjectList(t){const r=Ht(t,this.options),{keys:i,records:a}=this._myIndex,s=[];return a.forEach(({$:l,i:o})=>{if(!ie(l))return;let u=[];i.forEach((c,p)=>{u.push(...this._findMatches({key:c,value:l[p],searcher:r}))}),u.length&&s.push({idx:o,item:l,matches:u})}),s}_findMatches({key:t,value:r,searcher:i}){if(!ie(r))return[];let a=[];if(Ee(r))r.forEach(({v:s,i:l,n:o})=>{if(!ie(s))return;const{isMatch:u,score:c,indices:p}=i.searchIn(s);u&&a.push({score:c,key:t,value:s,idx:l,norm:o,indices:p})});else{const{v:s,n:l}=r,{isMatch:o,score:u,indices:c}=i.searchIn(s);o&&a.push({score:u,key:t,value:s,norm:l,indices:c})}return a}}$e.version="6.6.2";$e.createIndex=Ur;$e.parseIndex=la;$e.config=w;$e.parseQuery=qr;ba(Ca);function ht(e){const[t,r]=qe(),{datasets:i}=z(C=>C.dataset),a=t.get("s"),s=t.get("sf"),[l,o]=E.exports.useState(e.filter(C=>te(i,C.allowed))),[u,c]=E.exports.useState(e.filter(C=>te(i,C.allowed))),[p,h]=E.exports.useState(a||""),[m,g]=E.exports.useState(s?s.split(","):[]),d=E.exports.useCallback(C=>{o(C.filter(A=>te(i,A.allowed)))},[i]),y=E.exports.useCallback(()=>{let C=[];if(p.length>0&&m.length>0){const A={includeScore:!0,threshold:.3,keys:m.map(R=>R.toLocaleLowerCase())};C=new $e(l,A).search(p).map(R=>R.item)}else C=l;c(C.filter(A=>te(i,A.allowed)))},[i,l,m,p]);return E.exports.useEffect(()=>{const C=[...t.entries()],A={};for(const O in C)A[C[O][0]]=C[O][1];p.length>0&&(A.s=p),m.length>0&&(A.sf=m.join(",")),r(A)},[m,t,p,r]),E.exports.useEffect(()=>{y()},[y,l,m,p]),{searchString:p,setSearchString:h,searchFields:m,setSearchFields:g,setList:d,searchResults:u}}function wa({skill:e}){return f(x,{container:!0,spacing:1,columns:2,children:[n(x,{item:!0,xs:2,children:n(b,{variant:"h6",children:e.name})}),n(x,{item:!0,xs:2,md:1,children:f(b,{variant:"caption",children:["Root: ",e.root]})}),n(x,{item:!0,xs:2,md:1,children:f(b,{variant:"caption",children:["Type: ",e.type]})}),n(x,{item:!0,xs:2,children:f(b,{variant:"caption",children:["Tools: ",e.tools.filter(t=>t!=="").join(", ")]})}),n(x,{item:!0,xs:2,children:f(b,{variant:"caption",children:["Restrictions: ",e.restriction]})}),n(x,{item:!0,xs:2,children:e.description.split("<br>").map(t=>n(b,{variant:"body2",children:t},t))})]})}function La({trait:e}){return f(x,{container:!0,spacing:1,columns:3,children:[n(x,{item:!0,xs:3,children:n(b,{variant:"h6",children:e.name})}),n(x,{item:!0,sm:3,md:1,children:f(b,{variant:"caption",children:["Type: ",e.type]})}),e.cost!==0?n(x,{item:!0,sm:3,md:1,children:f(b,{variant:"caption",children:["Cost: ",typeof e.cost=="number"?e.cost:e.cost.join(", ")]})}):null,e.stock!=="Any"?n(x,{item:!0,sm:3,md:1,children:f(b,{variant:"caption",children:["Stock: ",e.stock]})}):null,n(x,{item:!0,xs:3,children:e.description.split("<br>").map(t=>n(b,{variant:"body2",sx:{textIndent:"8px"},children:t},t))})]})}function Pa({anchor:e,data:t,onClose:r}){return n(Cn,{open:Boolean(e),onClose:r,anchorEl:e,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:n(x,{container:!0,spacing:1,sx:{maxWidth:"400px",padding:"12px 16px"},columns:2,children:"root"in t?n(wa,{skill:t}):n(La,{trait:t})})})}function xe({data:e}){const[t,r]=E.exports.useState(null),i=()=>{r(null)};return f(vn,{underline:"hover",onMouseDown:s=>{r(s.currentTarget)},children:[e.name,n(Pa,{anchor:t,data:e,onClose:i})]})}function Ra({lifepath:e}){const{datasets:t}=z(l=>l.dataset),r=typeof e.generalSkillPool=="string"||e.generalSkillPool>0,i=typeof e.skillPool=="string"||e.skillPool>0,a=r?pe["Any General"].skills.find(l=>l.name==="General"):void 0,s=e.skills.filter(l=>{const[o,u]=l.split("\u279E"),c=pe[o].skills.find(p=>p.name===u);return te(t,c.allowed)}).map(l=>{const[o,u]=l.split("\u279E");return pe[o].skills.find(c=>c.name===u)});return f(E.exports.Fragment,{children:[n("b",{children:"Skills: "}),r?f("span",{children:[e.generalSkillPool,e.generalSkillPool>1?"pts: ":"pt: "]}):null,r&&a?n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"0 0 0 2px",width:"max-content",display:"inline-block"},children:n(xe,{data:a})}):null,n(N,{sx:{display:"inline-block",margin:"0 6px 0 0"},children:r&&i?"; ":null}),i?f("span",{children:[e.skillPool,e.skillPool>1?"pts: ":"pt: "]}):null,i?s.map((l,o)=>n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"0 0 0 2px",width:"max-content",display:"inline-block"},children:n(xe,{data:l})},o)):null]})}function Na({lifepath:e}){const{datasets:t}=z(i=>i.dataset),r=e.traits.filter(i=>{const[a,s]=i.split("\u279E"),l=we[a].traits.find(o=>o.name===s);return te(t,l.allowed)}).map(i=>{const[a,s]=i.split("\u279E");return we[a].traits.find(l=>l.name===s)});return f(E.exports.Fragment,{children:[n("b",{children:"Traits: "})," ",e.traitPool,e.traitPool>1?"pts: ":"pt: ",e.traits.length!==0?r.map((i,a)=>n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"0 0 0 2px",width:"max-content",display:"inline-block"},children:n(xe,{data:i})},a)):n(N,{sx:{padding:"0 4px",display:"inline-block"},children:"\u2014"})]})}function ka({lifepath:e}){const t=i=>{const a=new Set;i.items.forEach(l=>{typeof l=="string"?a.add(Fi(l,2,["lifepath","lifepaths"])):a.add(t(l))});const s=[...a];return s.length>1&&i.type!=="NOT"?s[s.length-1]=`${i.type.toLowerCase()} ${s[s.length-1]}`:i.type==="NOT"&&(s[0]=`Character cannot have ${s[0]}`,s.length>1&&(s[s.length-1]=`and ${s[s.length-1]}`)),s.length<3?s.join(" "):s.join(", ")},r=i=>{const a=[];return i.forEach(s=>{const l=s.split("\u279E");l[0]==="LP"?l[1]==="UNIQUE"?a.push("This cannot be selected twice."):l[1]==="MIN"?a.push(`This can be selected as the ${br(parseInt(l[2]))} lifepath or higher.`):l[1]==="MAX"&&a.push(`This can be selected as the ${br(parseInt(l[2]))} lifepath or lower.`):l[0]==="YEARS"?l[1]==="MIN"?a.push(`Character must be at least ${parseInt(l[2])} years old.`):l[1]==="MAX"&&a.push(`Character must be at most ${parseInt(l[2])} years old.`):l[0]==="GRIEF"?l[1]==="MIN"?a.push(`Character must have at least a ${l[0].toLowerCase()} of ${parseInt(l[2])}.`):l[1]==="MAX"&&a.push(`Character must have at most a ${l[0].toLowerCase()} of ${parseInt(l[2])}.`):l[0]==="GENDER"&&a.push(`Character's must be a ${l[1].toLowerCase()}.`)}),a.map((s,l)=>n("span",{children:s},l))};return f(E.exports.Fragment,{children:[n("b",{children:"Requirements: "}),e.requirements.conditions?f("span",{children:[t(e.requirements.conditions),". "]}):null,e.requirements.limits?r(e.requirements.limits):null,e.requirements.texts?e.requirements.texts.map((i,a)=>f("span",{children:[i," "]},a)):null]})}function Da({lifepath:e}){const{datasets:t}=z(l=>l.dataset),r=l=>l.years+(typeof l.years!="number"?"":l.skillPool>1?"yrs":"yr"),i=l=>l.resources+(typeof l.resources!="number"?"":l.resources>1?"rps":"rp"),a=l=>{const o=[];return l.eitherPool===0&&l.mentalPool===0&&l.physicalPool===0?o.push("\u2014"):l.eitherPool!==0?o.push(`${l.eitherPool>0?`+${l.eitherPool}`:l.eitherPool}M/P`):(l.mentalPool!==0&&o.push(`${l.mentalPool>0?`+${l.mentalPool}`:l.mentalPool}M`),l.physicalPool!==0&&o.push(`${l.physicalPool>0?`+${l.physicalPool}`:l.physicalPool}P`)),o.join(", ")},s=l=>{const o=l.leads.length===0?"\u2014":l.leads.filter(u=>{const c=u.split("\u279E");return te(t,le[c[0]].settings[c[1]].allowed)}).map(u=>{const c=u.split("\u279E");return le[c[0]].settings[c[1]].short});return typeof o=="string"?o:o.join(", ")};return f(x,{container:!0,rowSpacing:0,columnSpacing:0,columns:18,children:[n(x,{item:!0,lg:6,md:12,sm:18,xs:18,children:n(U,{elevation:3,square:!0,sx:{padding:"2px 6px 4px"},children:n(b,{variant:"body1",children:e.name})})}),n(x,{item:!0,lg:1,md:2,sm:6,xs:6,children:n(U,{elevation:3,square:!0,sx:{padding:"2px 6px 4px"},children:n(b,{variant:"caption",children:r(e)})})}),n(x,{item:!0,lg:1,md:2,sm:6,xs:6,children:n(U,{elevation:3,square:!0,sx:{padding:"2px 6px 4px"},children:n(b,{variant:"caption",children:i(e)})})}),n(x,{item:!0,lg:1,md:2,sm:6,xs:6,children:n(U,{elevation:3,square:!0,sx:{padding:"2px 6px 4px"},children:n(b,{variant:"caption",children:a(e)})})}),n(x,{item:!0,lg:9,md:18,sm:18,xs:18,children:n(U,{elevation:3,square:!0,sx:{padding:"2px 6px 4px"},children:n(b,{variant:"caption",children:s(e)})})}),n(x,{item:!0,md:16,children:n(b,{variant:"caption",children:n(Ra,{lifepath:e})})}),n(x,{item:!0,md:16,children:n(b,{variant:"caption",children:n(Na,{lifepath:e})})}),Object.keys(e.requirements).length>0?n(x,{item:!0,md:16,children:n(b,{variant:"caption",children:n(ka,{lifepath:e})})}):null]})}function Ma(){const{datasets:e}=z(g=>g.dataset),{stock:t,setting:r}=z(g=>g.lifepathList),{lplChangeStock:i,lplChangeSetting:a}=ee().lifepathList,{searchString:s,setSearchString:l,searchFields:o,setSearchFields:u,setList:c,searchResults:p}=ht(le[t].settings[r].lifepaths),[h,m]=qe();return E.exports.useEffect(()=>{const g=[...h.entries()],d={};for(const y in g)d[g[y][0]]=g[y][1];d.stock=t,d.setting=r,m(d)},[h,m,r,t]),E.exports.useEffect(()=>{c(le[t].settings[r].lifepaths)},[t,r,c]),f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Lifepath Explorer"}),f(j,{columns:4,center:!0,children:[n(x,{item:!0,xs:6,sm:3,md:1,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Stock"}),n(W,{label:"Stock",value:t,onChange:i,placeholder:"Select a stock",children:Object.values(le).filter(g=>te(e,g.allowed)).map((g,d)=>n(P,{value:g.name,children:g.name},d))})]})}),n(x,{item:!0,xs:6,sm:3,md:1,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Setting"}),n(W,{label:"Setting",value:r,onChange:a,placeholder:"Select a setting",children:Object.values(le[t].settings).filter(g=>te(e,g.allowed)).map((g,d)=>n(P,{value:g.name,children:g.name},d))})]})}),n(x,{item:!0,xs:6,sm:3,md:1,children:n(re,{label:"Search",variant:"standard",value:s,onChange:g=>l(g.target.value),fullWidth:!0})}),n(x,{item:!0,xs:6,sm:3,md:1,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Search Fields"}),n(W,{value:o,onChange:g=>u(typeof g.target.value=="string"?g.target.value.split(","):g.target.value),renderValue:g=>g.join(", "),multiple:!0,children:["Name","Leads","Skills","Traits"].map(g=>f(P,{value:g,children:[n(be,{checked:o.indexOf(g)>-1}),n(Ze,{primary:g})]},g))})]})})]}),n(j,{columns:1,spacing:2,center:!0,children:p.length>0?p.map((g,d)=>n(x,{item:!0,xs:1,children:n(Da,{lifepath:g})},d)):n(Le,{severity:"warning",sx:{width:"100%",maxWidth:"600px",margin:"12px auto"},children:"Could not find any matches. Try adding more fields or changing search text."})})]})}function Ga(){const{datasets:e}=z(h=>h.dataset),{category:t}=z(h=>h.skillList),{sklChangeCategory:r}=ee().skillList,{searchString:i,setSearchString:a,searchFields:s,setSearchFields:l,setList:o,searchResults:u}=ht(pe[t].skills),[c,p]=qe();return E.exports.useEffect(()=>{const h=[...c.entries()],m={};for(const g in h)m[h[g][0]]=h[g][1];m.category=t,p(m)},[t,c,p]),E.exports.useEffect(()=>{o(pe[t].skills)},[t,o]),f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Skill Explorer"}),f(j,{columns:4,center:!0,children:[n(x,{item:!0,xs:4,sm:4,md:2,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Skill Category"}),n(W,{label:"Skill Category",value:t,onChange:r,placeholder:"Select a category",children:Object.values(pe).filter(h=>te(e,h.allowed)).map((h,m)=>n(P,{value:h.name,children:h.name},m))})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:n(re,{label:"Search",variant:"standard",value:i,onChange:h=>a(h.target.value),fullWidth:!0})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Search Fields"}),n(W,{value:s,onChange:h=>l(typeof h.target.value=="string"?h.target.value.split(","):h.target.value),renderValue:h=>h.join(", "),multiple:!0,children:["Name","Type","Root","Description"].map(h=>f(P,{value:h,children:[n(be,{checked:s.indexOf(h)>-1}),n(Ze,{primary:h})]},h))})]})})]}),n(j,{spacing:2,children:u.length>0?u.sort((h,m)=>h.name.localeCompare(m.name)).map((h,m)=>n(x,{item:!0,children:n(U,{elevation:2,sx:{cursor:"pointer",padding:"2px 6px"},children:n(xe,{data:h})})},m)):n(Le,{severity:"warning",sx:{width:"100%",maxWidth:"600px",margin:"12px auto"},children:"Could not find any matches. Try adding more fields or changing search text."})})]})}function Fa(){const{datasets:e}=z(h=>h.dataset),{category:t}=z(h=>h.traitList),{trtChangeCategory:r}=ee().traitList,{searchString:i,setSearchString:a,searchFields:s,setSearchFields:l,setList:o,searchResults:u}=ht(we[t].traits),[c,p]=qe();return E.exports.useEffect(()=>{const h=[...c.entries()],m={};for(const g in h)m[h[g][0]]=h[g][1];m.category=t,p(m)},[t,c,p]),E.exports.useEffect(()=>{o(we[t].traits)},[t,o]),f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Trait Explorer"}),f(j,{columns:4,center:!0,children:[n(x,{item:!0,xs:4,sm:4,md:2,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Trait Category"}),n(W,{label:"Trait Category",value:t,onChange:r,placeholder:"Select a category",children:Object.values(we).filter(h=>te(e,h.allowed)).map((h,m)=>n(P,{value:h.name,children:h.name},m))})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:n(re,{label:"Search",variant:"standard",value:i,onChange:h=>a(h.target.value),fullWidth:!0})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Search Fields"}),n(W,{value:s,onChange:h=>l(typeof h.target.value=="string"?h.target.value.split(","):h.target.value),renderValue:h=>h.join(", "),multiple:!0,children:["Name","Type","Description"].map(h=>f(P,{value:h,children:[n(be,{checked:s.indexOf(h)>-1}),n(Ze,{primary:h})]},h))})]})})]}),n(j,{spacing:2,children:u.length>0?u.sort((h,m)=>h.name.localeCompare(m.name)).map((h,m)=>n(x,{item:!0,children:n(U,{elevation:2,sx:{cursor:"pointer",padding:"2px 6px"},children:n(xe,{data:h})})},m)):n(Le,{severity:"warning",sx:{width:"100%",maxWidth:"600px",margin:"12px auto"},children:"Could not find any matches. Try adding more fields or changing search text."})})]})}function Wa({chosenLifepaths:e}){const t={mandSkills:new Set,skills:new Set,mandTraits:new Set,traits:new Set};for(const l in e){const o=e[l];let u=o.skills.findIndex(p=>!t.mandSkills.has(p));u===-1&&(u=0),o.skills.forEach((p,h)=>{h===u&&t.mandSkills.add(p)});let c=o.traits.findIndex(p=>!t.mandSkills.has(p));c===-1&&(c=0),o.traits.forEach((p,h)=>{h===c&&t.mandTraits.add(p)})}for(const l in e){const o=e[l];o.skills.forEach(u=>{t.mandSkills.has(u)||t.skills.add(u)}),o.traits.forEach(u=>{t.mandTraits.has(u)||t.traits.add(u)})}const r=[...t.mandSkills].map(l=>{const[o,u]=l.split("\u279E");let c=pe[o].skills.find(p=>p.name===u);return u==="1*ANY"&&(c=pe[o].skills.find(p=>p.name==="Any wise")),c}),i=[...t.skills].map(l=>{const[o,u]=l.split("\u279E");let c=pe[o].skills.find(p=>p.name===u);return u==="1*ANY"&&(c=pe[o].skills.find(p=>p.name==="Any wise")),c}),a=[...t.mandTraits].map(l=>{const[o,u]=l.split("\u279E");return we[o].traits.find(p=>p.name===u)}),s=[...t.traits].map(l=>{const[o,u]=l.split("\u279E");return we[o].traits.find(p=>p.name===u)});return f(x,{container:!0,columns:1,spacing:1,children:[f(x,{item:!0,xs:1,children:["Mandatory Skills:",r.length>0?r.map((l,o)=>n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"3px 3px 0",width:"max-content",display:"inline-block"},children:n(xe,{data:l})},o)):n(N,{sx:{padding:"0 4px",display:"inline-block"},children:"\u2014"})]}),f(x,{item:!0,xs:1,children:["Skills:",i.length>0?i.map((l,o)=>n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"3px 3px 0",width:"max-content",display:"inline-block"},children:n(xe,{data:l})},o)):n(N,{sx:{padding:"0 4px",display:"inline-block"},children:"\u2014"})]}),f(x,{item:!0,xs:1,children:["Mandatory Traits:",a.length>0?a.map((l,o)=>n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"3px 3px 0",width:"max-content",display:"inline-block"},children:n(xe,{data:l})},o)):n(N,{sx:{padding:"0 4px",display:"inline-block"},children:"\u2014"})]}),f(x,{item:!0,xs:1,children:["Traits:",s.length>0?s.map((l,o)=>n(U,{elevation:2,sx:{cursor:"pointer",padding:"0 4px",margin:"3px 3px 0",width:"max-content",display:"inline-block"},children:n(xe,{data:l})},o)):n(N,{sx:{padding:"0 4px",display:"inline-block"},children:"\u2014"})]})]})}function Ha({chosenLifepaths:e}){const t={year:0,yearExt:[],ageStats:[0,0],resource:0,resourcesExt:[],either:0,mental:0,physical:0,general:0,generalExt:[],lifepath:0,lifepathExt:[],trait:0};for(const i in e){const a=e[i];if(parseInt(i)!==0){const s=e[parseInt(i)-1];a.setting!==s.setting&&(t.year+=1)}t.either+=a.eitherPool,t.mental+=a.mentalPool,t.physical+=a.physicalPool,typeof a.years=="number"?t.year+=a.years:t.yearExt.push(a.years),typeof a.resources=="number"?t.resource+=a.resources:t.resourcesExt.push(a.resources),typeof a.generalSkillPool=="number"?t.general+=a.generalSkillPool:t.generalExt.push(a.generalSkillPool),typeof a.skillPool=="number"?t.lifepath+=a.skillPool:t.lifepathExt.push(a.skillPool),t.trait+=a.traitPool}const r=le[e[0].stock].agePool.filter(i=>i.max>=t.year&&i.min<=t.year);return t.ageStats=[r[0].m,r[0].p],f(x,{container:!0,columns:2,children:[n(x,{item:!0,xs:1,children:f(b,{variant:"caption",children:["Years: ",t.year,t.yearExt.length>0?`, plus ${t.yearExt.join(" ")}`:""]})}),n(x,{item:!0,xs:1,children:f(b,{variant:"caption",children:["Resources: ",t.resource,t.resourcesExt.length>0?`, plus ${t.resourcesExt.join(" ")}`:""]})}),n(x,{item:!0,xs:1,children:f(b,{variant:"caption",children:["Stats: ",t.ageStats[0]+t.mental,"M, ",t.ageStats[1]+t.physical,"P ",t.either!==0?`(${t.either>0?"+":""}${t.either}M/P)`:""]})}),n(x,{item:!0,xs:1,children:f(b,{variant:"caption",children:["Trait Points: ",t.trait]})}),n(x,{item:!0,xs:1,children:f(b,{variant:"caption",children:["General Skill Points: ",t.general,t.generalExt.length>0?`, plus ${t.generalExt.join(" ")}`:""]})}),n(x,{item:!0,xs:1,children:f(b,{variant:"caption",children:["Lifepath Skill Points: ",t.lifepath,t.lifepathExt.length>0?`, plus ${t.lifepathExt.join(" ")}`:""]})})]})}function ja(){const{datasets:e}=z(v=>v.dataset),{stock:t,setting:r,noDuplicates:i,maxLeads:a,maxLifepaths:s,minLifepaths:l}=z(v=>v.lifepathRandomizer),{lprChangeMaxLPs:o,lprChangeMaxLeads:u,lprChangeMinLPs:c,lprChangeStock:p,lprToggleNoDuplicates:h}=ee().lifepathRandomizer,[m,g]=E.exports.useState([]),[d,y]=E.exports.useState(!1),C=E.exports.useCallback((v,I)=>{if(I.startsWith("Skill")){if(!v.some(k=>k.skills.includes(I.slice(6))))return!1}else if(I.startsWith("Trait")){if(!!v.some(k=>k.traits.includes(I.slice(6))))return!1}else if(!v.some(T=>T.name===I.split("\u279E")[2]))return!1;return!0},[]),A=E.exports.useCallback((v,I)=>I.type==="AND"?I.items.every(T=>typeof T=="string"?C(v,T):A(v,T)):I.type==="OR"?I.items.some(T=>typeof T=="string"?C(v,T):A(v,T)):I.type==="NOT"?!I.items.every(T=>typeof T=="string"?C(v,T):A(v,T)):!0,[C]),O=E.exports.useCallback((v,I,T)=>{const k=[];v=v.filter(D=>D.born===!1).filter(D=>te(e,D.allowed));for(const D in v){const Q=v[D],K=Q.requirements.conditions,oe=Q.requirements.limits;let M=!0;K&&(M=A(I,K)),oe&&oe.forEach(V=>{(V==="LP\u279EUNIQUE"&&I.includes(Q)||V.startsWith("LP\u279EMIN")&&I.length<parseInt(V.split("\u279E")[2])||V.startsWith("LP\u279EMAX")&&I.length>parseInt(V.split("\u279E")[2])||V.startsWith("YEARS\u279EMIN")&&T<=parseInt(V.split("\u279E")[2])||V.startsWith("YEARS\u279EMAX")&&T>=parseInt(V.split("\u279E")[2]))&&(M=!1)}),M&&k.push(Q)}return k},[A,e]),_=E.exports.useCallback((v,I)=>v.map(D=>D.years).filter(D=>typeof D=="number").reduce((D,Q)=>D+Q)+I,[]),R=E.exports.useCallback((v,I,T)=>{const k=I[I.length-1];let D=[...v.settings[k.setting].lifepaths];if(T<a)for(const M in k.leads)D=[...D,...v.settings[k.leads[M].split("\u279E")[1]].lifepaths];const Q=_(I,T),K=O(D,I,Q),oe=K[he(0,K.length-1)];return oe.setting!==I[I.length-1].setting&&(T=T+1),{chosenLP:oe,leadsCount:T}},[O,_,a]),L=E.exports.useCallback(()=>{const v=[];let I=0;const T=Object.values(le),k=t==="Random"?le[T[he(0,T.length-1)].name]:le[t],D=Object.values(k.settings).filter(ne=>ne.type==="Setting"),K=(r==="Random"?k.settings[D[he(0,D.length-1)].name]:k.settings[r]).lifepaths.filter(ne=>ne.born).filter(ne=>te(e,ne.allowed)),oe=K.length-1;v.push(K[he(0,oe)]);const M=he(l-1,s-1);let V=0;const ve=20;let ke=0;for(;ke<ve&&V<M;){const{chosenLP:ne,leadsCount:Qe}=R(k,v,I);if(I=Qe,v.filter(ze=>ze.name===ne.name&&ze.setting===ne.setting).length>0&&i){ke+=1;continue}else ke=0,V+=1,v.push(ne)}v.length<l&&y(!0),g(v)},[t,r,l,s,e,R,i]);return f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Lifepath Randomizer"}),f(j,{columns:5,center:!0,children:[n(x,{item:!0,xs:5,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Stock"}),f(W,{label:"Stock",value:t,onChange:p,children:[n(P,{value:"Random",children:"Random"},"Random"),Object.values(le).map(v=>n(P,{value:v.name,children:v.name},v.name))]})]})}),n(x,{item:!0,xs:5,sm:2,md:1,children:n(re,{label:"Max Leads",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:a,onChange:u,fullWidth:!0,variant:"standard"})}),n(x,{item:!0,xs:5,sm:2,md:1,children:n(re,{label:"Min Lifepaths",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:l,onChange:c,fullWidth:!0,variant:"standard"})}),n(x,{item:!0,xs:5,sm:2,md:1,children:n(re,{label:"Max Lifepaths",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:s,onChange:o,fullWidth:!0,variant:"standard"})}),n(x,{item:!0,xs:5,sm:2,md:1,children:n(Te,{label:"No Duplicates",labelPlacement:"start",control:n(be,{checked:i,onChange:h})})}),n(x,{item:!0,xs:5,children:n(Le,{severity:"info",children:"Random lifepath selection does not consider the gender, lifepaths with variable ages, and emotional attribute limits. Please make sure to check those requirements seperately."})}),n(x,{item:!0,xs:5,children:n(de,{variant:"outlined",onClick:()=>L(),fullWidth:!0,children:"Generate Random Character"})})]}),m.length>0?f(j,{columns:2,children:[d?n(x,{item:!0,xs:2,children:n(Le,{severity:"warning",children:"There might be lifepaths missing because of the chosen options."})}):n(E.exports.Fragment,{}),f(x,{item:!0,xs:2,md:1,children:[n(Z,{sx:{margin:"0 0 6px"},children:n(b,{children:"Lifepaths"})}),n(He,{spacing:2,children:m.map((v,I)=>f(U,{children:[I+1,". ",`${v.stock}\u279E${v.setting}\u279E${v.name}`]},I))}),n(Z,{sx:{margin:"30px 0 6px"},children:n(b,{children:"Basic Information"})}),n(Ha,{chosenLifepaths:m})]}),f(x,{item:!0,xs:2,md:1,children:[n(Z,{sx:{margin:"0 0 6px"},children:n(b,{children:"Skills, Traits, and Misc"})}),n(Wa,{chosenLifepaths:m})]})]}):null]})}function $a({cell:e,cellIndex:t,setNotification:r}){const{cells:i}=z(o=>o.practicePlanner),{prpDeleteCell:a,prpChangeCellHour:s,prpDeletePractice:l}=ee().practicePlanner;return n(U,{elevation:3,sx:{padding:"5px 10px",margin:"10px 10px 10px"},children:f(He,{spacing:0,children:[f(b,{children:["Day ",t+1,n(J,{size:"small",sx:{float:"right"},onClick:()=>a(t),children:n(Ke,{fontSize:"small"})}),n(J,{size:"small",sx:{float:"right"},onClick:()=>s(t,-1,i,r),children:n(bn,{fontSize:"small"})}),n(J,{size:"small",sx:{float:"right"},onClick:()=>s(t,1,i,r),children:n(An,{fontSize:"small"})})]}),n(N,{sx:{margin:"0 5px 0"},children:[...Array(e.maxHours)].map((o,u)=>{const c=e.placed.length>0?e.placed.map(p=>p.hours).reduce((p,h)=>p+h):0;return n(_n,{fontSize:"small",color:c>=e.maxHours?"error":u>=c?"success":"warning",sx:{margin:"0 0 0 -8px","&:nth-child(6n)":{marginRight:"3px"}}},u)})}),e.placed.length>0?n(Z,{}):null,n(He,{spacing:1,sx:{margin:"6px 0"},children:e.placed.map((o,u)=>f(U,{elevation:4,sx:{padding:"2px 4px"},children:[o.skillName," ",f(b,{variant:"caption",children:["(",o.skillType,", ",o.testType,", ",o.hours,"hr",o.hours>1?"s":"",")"]}),n(J,{size:"small",sx:{float:"right"},onClick:()=>l(t,u),children:n(Ke,{fontSize:"small"})})]},u))})]})})}function za(){const{days:e,hours:t,cells:r}=z(c=>c.practicePlanner),{prpChangeDays:i,prpChangeHours:a,prpAddCells:s,prpAddPractice:l}=ee().practicePlanner,[o,u]=E.exports.useState(null);return f(E.exports.Fragment,{children:[o,n(b,{variant:"h3",children:"Practice Planner"}),f(j,{columns:3,center:"v",children:[n(x,{item:!0,children:n(re,{label:"Number of Days",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:e,onChange:i,variant:"standard"})}),n(x,{item:!0,children:n(re,{label:"Number of Hours per Day",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:t,onChange:a,variant:"standard"})}),n(x,{item:!0,children:n(de,{variant:"outlined",onClick:()=>s(e,t),children:"Add Days"})})]}),n("form",{onSubmit:c=>l(c,r,u),children:f(j,{columns:5,center:!0,children:[n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Day"}),n(W,{label:"Day",defaultValue:"",disabled:r.length<1,children:Object.keys(r).map(c=>n(P,{value:parseInt(c),children:parseInt(c)+1},parseInt(c)))})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Skill Type"}),n(W,{label:"Skill Type",defaultValue:"Academic",disabled:r.length<1,children:Object.keys(Pt).map(c=>n(P,{value:c,children:c},c))})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Test Type"}),f(W,{defaultValue:"Difficult",disabled:r.length<1,children:[n(P,{value:"Routine",children:"Routine"}),n(P,{value:"Difficult",children:"Difficult"}),n(P,{value:"Challenging",children:"Challenging"})]})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:n(re,{id:"component-simple",label:"Skill Name",variant:"standard",defaultValue:"",disabled:r.length<1})}),n(x,{item:!0,xs:4,sm:2,md:1,children:n(de,{type:"submit",variant:"outlined",size:"medium",disabled:r.length<1,children:"Add Practice"})})]})}),r.length>0?n(Z,{sx:{margin:"10px 0 0 "},children:"Timetable"}):null,n(j,{columns:4,children:r.map((c,p)=>n(x,{item:!0,xs:4,sm:4,md:2,lg:2,children:n($a,{cell:c,cellIndex:p,setNotification:u})},p))})]})}const Va="/bwgr-tools/assets/SourceCodePro-SemiBold.836f7b01.woff",Ba=ut.canvas`
	position: absolute;
	left: 0;
	top: 0; 
	z-index: 101;
	width: 100%;
`;function Ua(){const e=E.exports.createRef(),[t,r]=E.exports.useState(),i=E.exports.useCallback(()=>{if(t){t.fillStyle=dt.palette.grey[900];for(let a=6;a>=1;a--)t.beginPath(),t.arc(H.canvasSize/2,H.canvasSize/2,H.circleOffset+H.circleRadius*a,0,2*Math.PI),t.stroke(),t.fill()}},[t]);return E.exports.useEffect(()=>{t&&(t.clearRect(0,0,H.canvasSize,H.canvasSize),i())},[t,i]),E.exports.useEffect(()=>{var a;r((a=e.current)==null?void 0:a.getContext("2d"))},[e]),n(Ba,{ref:e,height:H.canvasSize,width:H.canvasSize,children:"Your browser does not support canvas."})}const Ka=ut.canvas`
	position: absolute;
	left: 0;
	top: 0; 
	z-index: 102;
	width: 100%;
`;function Ya({currentAngles:e,blockAngle:t,magicData:r}){const i=E.exports.createRef(),[a,s]=E.exports.useState(),l=E.exports.useCallback((u,c,p)=>{if(a)for(let h=0;h<u.length;h++)a.rotate(p),a.save(),a.translate(0,-1*c),a.font="14px 'Code'",a.fillStyle=dt.palette.primary.light,a.fillText(u[h].toLowerCase(),0,0),a.restore()},[a]),o=E.exports.useCallback(u=>{if(a)for(const c in r)for(const p in r[c]){const h=r[c][p].name.length,m=H.circleRadius*(parseInt(c)+1)+H.textOffset,g=8*(1/m),d=(t[parseInt(c)]-g*h)/2,y=(t[parseInt(c)]*-parseInt(p)-g*2)/2;a.save(),a.translate(H.canvasSize/2,H.canvasSize/2),a.rotate(u[parseInt(c)]+d+y-t[parseInt(c)]/2),l(r[c][p].name,m,g),a.restore()}},[a,r,t,l]);return E.exports.useEffect(()=>{a&&(a.clearRect(0,0,H.canvasSize,H.canvasSize),o(e))},[a,t,e,o]),E.exports.useEffect(()=>{var u;s((u=i.current)==null?void 0:u.getContext("2d"))},[i]),n(Ka,{ref:i,height:H.canvasSize,width:H.canvasSize,children:"Your browser does not support canvas."})}const Xa=ut.canvas`
	position: absolute;
	left: 0;
	top: 0; 
	z-index: 103;
	width: 100%;
`;function qa({show:e}){const t=E.exports.createRef(),[r,i]=E.exports.useState(),a=E.exports.useCallback(()=>{r&&(r.fillStyle=dt.palette.common.black,r.beginPath(),r.moveTo(H.canvasSize/2,H.canvasSize/2),r.arc(H.canvasSize/2,H.canvasSize/2,H.circleOffset+H.circleRadius*6,-Math.PI*7/18,Math.PI*25/18),r.closePath(),r.fill())},[r]);return E.exports.useEffect(()=>{r&&(r.clearRect(0,0,H.canvasSize,H.canvasSize),e&&a())},[r,e,a]),E.exports.useEffect(()=>{var s;i((s=t.current)==null?void 0:s.getContext("2d"))},[t]),n(Xa,{ref:t,height:H.canvasSize,width:H.canvasSize,children:"Your browser does not support canvas."})}const Za=ut.div`
	max-width: 100%;
	width: ${e=>e.size==="0px"?"580px":e.size};
	height: ${e=>e.size==="0px"?"580px":e.size};

	position: relative;
	margin: 0 auto;

	z-index: 100;
`,H={canvasSize:580,circleRadius:32,circleOffset:90,textOffset:100};function Qa(){const{datasets:e}=z(S=>S.dataset),{aoe:t,element:r,impetus:i,duration:a,origin:s,direction:l,steps:o,cover:u,elementIndex:c}=z(S=>S.magicWheel),{mgwChangeAOE:p,mgwChangeElement:h,mgwChangeImpetus:m,mgwChangeDuration:g,mgwChangeOrigin:d,mgwChangeDirection:y,mgwChangeSteps:C,mgwToggleCover:A,mgwChangeElementIndex:O}=ee().magicWheel,_=E.exports.createRef(),[R,L]=E.exports.useState("0px"),[v,I]=E.exports.useState(0),[T,k]=E.exports.useState(!1),[D,Q]=E.exports.useState([0,0,0,0,0]),[K,oe]=E.exports.useState(0),[M,V]=E.exports.useState(0),[ve,ke]=E.exports.useState(0),[ne,Qe]=E.exports.useState(0),[Je,ze]=E.exports.useState(0),[B,rr]=E.exports.useState(e.includes("msc")?or:At),nr=E.exports.useCallback(S=>{const Y=[s,a,i,r,t];for(const X in B){let ce=B[X].findIndex(ge=>ge.name===Y[X])+S;ce>B[X].length-1?ce=ce%B[X].length:ce<0&&(ce=(ce%B[X].length+B[X].length)%B[X].length),Y[X]=B[X][ce].name}d(Y[0]),g(Y[1]),m(Y[2]),h(Y[3]),p(Y[4])},[s,a,i,r,t,d,g,m,h,p,B]),et=E.exports.useCallback(S=>{switch(S){case"Area of Effect":return{bandIndex:4,currentAngle:Je,setFunction:ze,setStoreFunction:p};case"Element":return{bandIndex:3,currentAngle:ne,setFunction:Qe,setStoreFunction:h};case"Impetus":return{bandIndex:2,currentAngle:ve,setFunction:ke,setStoreFunction:m};case"Duration":return{bandIndex:1,currentAngle:M,setFunction:V,setStoreFunction:g};case"Origin":return{bandIndex:0,currentAngle:K,setFunction:oe,setStoreFunction:d};default:throw"Facet type invalid."}},[Je,M,ne,ve,K,p,g,h,m,d]),ir=E.exports.useCallback((S,Y)=>{const{bandIndex:X,currentAngle:Be,setFunction:ce}=et(Y),ge=Be+S*(D[X]/2);let Ie=Be,De=0,Me=!0,tt=!1;const sr=()=>{Me=!Me;const mt=Ie+.05*S;Ie=S>0&&mt>=ge||S<0&&mt<=ge?ge:mt,Me||(ce(Ie),(S>0&&Ie>=ge||S<0&&Ie<=ge)&&(tt=!0)),tt?(cancelAnimationFrame(De),I(Qr=>Qr-1)):De=requestAnimationFrame(sr)};De=requestAnimationFrame(sr)},[D,et]),ar=E.exports.useCallback(S=>{nr(S),I(5),["Area of Effect","Element","Impetus","Duration","Origin"].forEach(X=>ir(S,X))},[ir,nr]),Ve=E.exports.useCallback(S=>{const Y=S.target.name,X=S.target.value,Be=De=>{const Me=B[De].findIndex(tt=>tt.name===X);if(Me>-1)return D[De]/2*Me;throw"Facet not found."},{bandIndex:ce,setFunction:ge,setStoreFunction:Ie}=et(Y);ge(Be(ce)),Ie(X)},[D,et,B]),Zr=E.exports.useCallback(S=>{const Y=S.target.value;O(parseInt(Y))},[O]),pt=E.exports.useCallback(S=>{p(S[4][0].name),h(S[3][0].name),m(S[2][0].name),g(S[1][0].name),d(S[0][0].name)},[p,g,h,m,d]),ft=E.exports.useCallback(()=>{oe(0),V(0),ke(0),Qe(0),ze(0)},[]);E.exports.useEffect(()=>{_&&_.current&&L(window.getComputedStyle(_.current).width)},[_]),E.exports.useEffect(()=>{if(e.includes("msc")){const S=or;S[3]=Pn[c],rr([...S]),pt(S),ft()}else rr(At),pt(At),ft()},[e,c,ft,pt]),E.exports.useEffect(()=>{const S=[0,0,0,0,0];for(const Y in B)S[parseInt(Y)]=4*Math.PI/B[Y].length;Q(S)},[t,r,i,a,s,B,e]),E.exports.useEffect(()=>{T||new FontFace("Code",`url(${Va})`).load().then(S=>{document.fonts.add(S),k(!0)},console.error)},[T]);const _e=e.includes("msc")?6:5;return f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Magic Wheel"}),f(j,{columns:_e,center:!0,children:[n(x,{item:!0,xs:_e,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Area of Effect"}),n(W,{label:"Area of Effect",name:"Area of Effect",value:v>0?"":t,onChange:Ve,disabled:v>0,children:Object.values(B[4]).map(S=>n(P,{value:S.name,children:S.name},S.name))})]})}),e.includes("msc")?n(x,{item:!0,xs:_e,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Element Group"}),f(W,{label:"Element Group",name:"Element Group",value:v>0?"":c.toString(),onChange:Zr,disabled:v>0,children:[n(P,{value:"0",children:"Prime Elements"}),n(P,{value:"1",children:"Lower Elements"}),n(P,{value:"2",children:"Higher Elements"})]})]})}):null,n(x,{item:!0,xs:_e,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Element"}),n(W,{label:"Element",name:"Element",value:v>0?"":r,onChange:Ve,disabled:v>0,children:Object.values(B[3]).map(S=>n(P,{value:S.name,children:S.name},S.name))})]})}),n(x,{item:!0,xs:_e,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:e.includes("msc")?"Law":"Impetus"}),n(W,{label:"Impetus",name:"Impetus",value:v>0?"":i,onChange:Ve,disabled:v>0,children:Object.values(B[2]).map(S=>n(P,{value:S.name,children:S.name},S.name))})]})}),n(x,{item:!0,xs:_e,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Duration"}),n(W,{label:"Duration",name:"Duration",value:v>0?"":a,onChange:Ve,disabled:v>0,children:Object.values(B[1]).map(S=>n(P,{value:S.name,children:S.name},S.name))})]})}),n(x,{item:!0,xs:_e,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Origin"}),n(W,{label:"Origin",name:"Origin",value:v>0?"":s,onChange:Ve,disabled:v>0,children:Object.values(B[0]).map(S=>n(P,{value:S.name,children:S.name},S.name))})]})})]}),n(Z,{sx:{margin:"10px 0 10px"}}),n(de,{variant:"outlined",disabled:v>0,onClick:()=>ar((Math.random()>.5?1:-1)*he(1,6)),fullWidth:!0,children:"Pray to the Lady Luck"}),n(Z,{sx:{margin:"2px 0 -8px"},children:n(b,{children:"OR"})}),f(j,{columns:2,center:!0,children:[n(x,{item:!0,xs:2,sm:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Direction"}),f(W,{label:"Direction",value:l,onChange:y,disabled:v>0,children:[n(P,{value:"Clockwise",children:"Clockwise"}),n(P,{value:"Counterclockwise",children:"Counterclockwise"})]})]})}),n(x,{item:!0,xs:2,sm:1,children:n(re,{label:"Steps",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:o,onChange:C,fullWidth:!0,disabled:v>0,variant:"standard"})}),n(x,{item:!0,xs:2,children:n(de,{variant:"outlined",disabled:v>0,onClick:()=>{v||ar((l==="Clockwise"?1:0)*o)},fullWidth:!0,children:"Turn the Wheel"})})]}),n(Z,{sx:{margin:"10px 0 8px"}}),T?f(E.exports.Fragment,{children:[f(Za,{ref:_,size:R,children:[n(Ua,{}),n(Ya,{currentAngles:[K,M,ve,ne,Je],blockAngle:D,magicData:B}),n(qa,{show:u})]}),n(Te,{label:"Toggle Cover",labelPlacement:"start",control:n(be,{checked:u,onChange:A})})]}):n(In,{})]})}function Ja({action:e}){return f(He,{spacing:0,sx:{width:"100%"},children:[e.tests?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Tests:"}),n(b,{variant:"body2",children:e.tests.join(", ")})]}):null,e.speakingThePart?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Speaking the part:"}),e.speakingThePart.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.special?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Special:"}),e.special.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.effects?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Effects:"}),e.effects.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.resolution?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Resolution:"}),Kt.map((t,r)=>{const i=e.resolution[t.name]?e.resolution[t.name]:"\u2014";return f(b,{variant:"body2",children:[t.name,": ",i]},r)})]}):null]})}function es(){const{volleyIndex:e,actions:t,selectedAction:r}=z(c=>c.duelOfWits),{dowChangeVolleyIndex:i,dowAddAction:a,dowDeleteAction:s,dowSelectedChangeAction:l,dowToggleActionDetails:o,dowToggleActionVisibility:u}=ee().duelOfWits;return f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Duel of Wits Planner"}),f(j,{columns:3,center:!0,children:[n(x,{item:!0,xs:3,sm:3,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Volley"}),f(W,{label:"Volley",value:e,onChange:c=>i(parseInt(c.target.value)),children:[n(P,{value:0,children:"Volley 1"}),n(P,{value:1,children:"Volley 2"}),n(P,{value:2,children:"Volley 3"})]})]})}),n(x,{item:!0,xs:3,sm:3,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Action"}),n(W,{label:"Action",value:r,onChange:c=>l(e,c.target.value),children:Kt.map(c=>n(P,{value:c.name,children:c.name},c.name))})]})}),n(x,{item:!0,xs:3,sm:3,md:1,children:n(de,{variant:"outlined",size:"medium",onClick:()=>a(e,r),children:"Add Action"})})]}),n(j,{columns:1,children:t.map((c,p)=>f(x,{item:!0,xs:1,children:[f(b,{variant:"h5",sx:{padding:"6px 10px"},children:["Volley ",p+1]}),c?f(x,{container:!0,columns:2,justifyContent:"space-between",sx:{padding:"10px"},children:[n(x,{item:!0,xs:2,sm:1,md:1,children:n(b,{variant:"h6",sx:{display:"inline-block"},children:c.visible?c.name:"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500"})}),f(x,{item:!0,children:[n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>o(p),children:c.open?n(zt,{}):n(Vt,{})}),n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>u(p),children:c.visible?n(Bt,{}):n(Ut,{})}),n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>s(p),children:n(Ke,{})})]}),n(x,{item:!0,xs:2,children:n(Z,{})}),c.visible&&c.open?n(Ja,{action:c}):null]}):n(b,{variant:"body2",children:"No action selected"})]},p))})]})}function ts({action:e}){return f(He,{spacing:0,sx:{width:"100%"},children:[f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Test:"}),n(b,{variant:"body2",children:e.test})]}),e.effect?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Effect:"}),e.effect.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.specialRestriction?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Special Restriction:"}),e.specialRestriction.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.specialAction?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Special Action:"}),e.specialAction.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.however?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:'There is a big "however":'}),e.however.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.resolution?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Resolution:"}),Yt.map((t,r)=>{const i=e.resolution[t.name]?e.resolution[t.name]:"\u2014";return f(b,{variant:"body2",children:[t.name,": ",i]},r)})]}):null]})}const Tr=jr(Yt,e=>e.group);function rs(){const{volleyIndex:e,actions:t,selectedAction:r}=z(c=>c.rangeAndCover),{racChangeVolleyIndex:i,racAddAction:a,racDeleteAction:s,racSelectedChangeAction:l,racToggleActionDetails:o,racToggleActionVisibility:u}=ee().rangeAndCover;return f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Range and Cover Planner"}),f(j,{columns:3,center:!0,children:[n(x,{item:!0,xs:3,sm:3,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Volley"}),f(W,{label:"Volley",value:e,onChange:c=>i(parseInt(c.target.value)),children:[n(P,{value:0,children:"Volley 1"}),n(P,{value:1,children:"Volley 2"}),n(P,{value:2,children:"Volley 3"})]})]})}),n(x,{item:!0,xs:3,sm:3,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Action"}),n(W,{label:"Action",value:r,onChange:c=>l(e,c.target.value),children:Object.keys(Tr).map((c,p)=>[n(Pr,{children:c},p),Object.values(Tr)[p].map((m,g)=>n(P,{value:m.name,children:m.name},g))])})]})}),n(x,{item:!0,xs:3,sm:3,md:1,children:n(de,{variant:"outlined",size:"medium",onClick:()=>a(e,r),children:"Add Action"})})]}),n(j,{columns:1,children:t.map((c,p)=>f(x,{item:!0,xs:1,children:[f(b,{variant:"h5",sx:{padding:"6px 10px"},children:["Volley ",p+1]}),c?f(x,{container:!0,columns:2,justifyContent:"space-between",sx:{padding:"10px"},children:[n(x,{item:!0,xs:2,sm:1,md:1,children:n(b,{variant:"h6",sx:{display:"inline-block"},children:c.visible?c.name:"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500"})}),f(x,{item:!0,children:[n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>o(p),children:c.open?n(zt,{}):n(Vt,{})}),n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>u(p),children:c.visible?n(Bt,{}):n(Ut,{})}),n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>s(p),children:n(Ke,{})})]}),n(x,{item:!0,xs:2,children:n(Z,{})}),c.visible&&c.open?n(ts,{action:c}):null]}):n(b,{variant:"body2",children:"No action selected"})]},p))})]})}const wr=["Great Strike","Strike","Avoid","Block","Counterstrike","Beat","Disarm","Faint","Charge/Tackle","Lock","Push","Throw"];function ns({action:e}){return f(He,{spacing:0,sx:{width:"100%"},children:[e.test?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Tests:"}),n(b,{variant:"body2",children:e.test})]}):null,f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Action Type:"}),n(b,{variant:"body2",children:e.group})]}),e.restrictions?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Restrictions:"}),e.restrictions.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.effect?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Effect:"}),e.effect.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.special?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Special:"}),e.special.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.cost?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Action Cost:"}),e.cost.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.interactions?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Interactions:"}),e.interactions.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))]}):null,e.resolution?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Resolution:"}),wr.map((t,r)=>{if(e.resolution){const i=e.resolution[t]?e.resolution[t]:"\u2014";return f(b,{variant:"body2",children:[t,": ",i]},r)}return null})]}):null,e.resolutionAgainst?f(N,{sx:{margin:"0 0 10px"},children:[n("b",{children:"Resolution (against):"}),wr.map((t,r)=>{if(e.resolutionAgainst){const i=e.resolutionAgainst[t]?e.resolutionAgainst[t]:"\u2014";return f(b,{variant:"body2",children:[t,": ",i]},r)}return null})]}):null]})}const Lr=jr(Rr,e=>e.group);function is(){const{reflexes:e,volleyIndex:t,actions:r,selectedAction:i}=z(g=>g.fight),{fgtChangeReflexes:a,fgtChangeVolleyIndex:s,fgtAddAction:l,fgtDeleteAction:o,fgtChangeSelectedAction:u,fgtToggleActionDetails:c,fgtToggleActionVisibility:p}=ee().fight,[h,m]=E.exports.useState(null);return f(E.exports.Fragment,{children:[h,n(b,{variant:"h3",children:"Fight Planner"}),f(j,{columns:4,center:!0,children:[n(x,{item:!0,xs:4,sm:2,md:1,children:n(re,{label:"Reflexes",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:e,onChange:g=>a(parseInt(g.target.value),r,m),fullWidth:!0,variant:"standard"})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Volley"}),f(W,{label:"Volley",value:t,onChange:g=>s(parseInt(g.target.value)),children:[n(P,{value:0,children:"Volley 1"}),n(P,{value:1,children:"Volley 2"}),n(P,{value:2,children:"Volley 3"})]})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{fullWidth:!0,variant:"standard",children:[n(F,{children:"Action"}),n(W,{label:"Action",value:i,onChange:g=>u(t,g.target.value),children:Object.keys(Lr).map((g,d)=>[n(Pr,{children:g},d),Object.values(Lr)[d].map((C,A)=>n(P,{value:C.name,children:C.name},A))])})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:n(de,{variant:"outlined",size:"medium",onClick:()=>l(t,i,e,r,m),children:"Add Action"})})]}),n(j,{columns:1,children:r.map((g,d)=>f(x,{item:!0,xs:1,children:[f(b,{variant:"h5",sx:{padding:"6px 10px"},children:["Volley ",d+1]}),g.length>0?g.map((y,C)=>f(x,{container:!0,columns:3,justifyContent:"space-between",sx:{padding:"10px"},children:[n(x,{item:!0,xs:3,sm:2,md:2,children:n(b,{variant:"h6",sx:{display:"inline-block"},children:y.visible?y.name:"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500"})}),f(x,{item:!0,children:[n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>c(d,C),children:y.open?n(zt,{}):n(Vt,{})}),n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>p(d,C),children:y.visible?n(Bt,{}):n(Ut,{})}),n(J,{size:"small",sx:{margin:"0 8px"},onClick:()=>o(d,C),children:n(Ke,{})})]}),n(x,{item:!0,xs:3,children:n(Z,{})}),y.visible&&y.open?n(ns,{action:y}):null]},C)):n(b,{variant:"body2",children:"No action selected"})]},d))})]})}function as({resource:e}){return f(j,{columns:3,center:!0,children:[n(x,{item:!0,xs:2,children:f(b,{variant:"h4",children:[e.name," "]})}),n(x,{item:!0,xs:1,children:n(b,{sx:{float:"right"},children:e.type})}),n(x,{item:!0,xs:3,children:typeof e.cost=="string"?f(b,{children:["Cost: ",e.cost]}):typeof e.cost=="number"?f(b,{children:["Cost: ",e.cost,e.cost>1?"rps":"rp"]}):f(N,{children:["Cost: ",e.cost.map((t,r)=>f(b,{variant:"body2",children:[t[0],": ",t[1],t[1]>1?"rps":"rp"]},r))]})}),e.description?f(E.exports.Fragment,{children:[n(x,{item:!0,xs:3,children:n(Z,{})}),n(x,{item:!0,xs:3,children:e.description.split("<br>").map((t,r)=>n(b,{variant:"body2",children:t},r))})]}):null]})}function ss(){const{datasets:e}=z(h=>h.dataset),{stock:t}=z(h=>h.resourceList),{rscChangeStock:r}=ee().resourceList,{searchString:i,setSearchString:a,searchFields:s,setSearchFields:l,setList:o,searchResults:u}=ht(_t[t].resources),[c,p]=qe();return E.exports.useEffect(()=>{const h=[...c.entries()],m={};for(const g in h)m[h[g][0]]=h[g][1];m.stock=t,p(m)},[c,p,t]),E.exports.useEffect(()=>{o(_t[t].resources)},[o,t]),f(E.exports.Fragment,{children:[n(b,{variant:"h3",children:"Resources List"}),f(j,{columns:4,center:!0,children:[n(x,{item:!0,xs:4,sm:4,md:2,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Resource Stock"}),n(W,{label:"Resource Stock",value:t,onChange:r,placeholder:"Select a stock",children:Object.values(_t).filter(h=>te(e,h.allowed)).map((h,m)=>n(P,{value:h.name,children:h.name},m))})]})}),n(x,{item:!0,xs:4,sm:2,md:1,children:n(re,{label:"Search",variant:"standard",value:i,onChange:h=>a(h.target.value),fullWidth:!0})}),n(x,{item:!0,xs:4,sm:2,md:1,children:f(G,{variant:"standard",fullWidth:!0,children:[n(F,{children:"Search Fields"}),n(W,{value:s,onChange:h=>l(typeof h.target.value=="string"?h.target.value.split(","):h.target.value),renderValue:h=>h.join(", "),multiple:!0,children:["Name","Type","Description"].map(h=>f(P,{value:h,children:[n(be,{checked:s.indexOf(h)>-1}),n(Ze,{primary:h})]},h))})]})})]}),n(j,{columns:1,children:u.length>0?u.map((h,m)=>n(x,{item:!0,xs:1,children:n(U,{elevation:2,sx:{padding:"0 12px 16px"},children:n(as,{resource:h})})},m)):n(Le,{severity:"warning",sx:{width:"100%",maxWidth:"600px",margin:"12px auto"},children:"Could not find any matches. Try adding more fields or changing search text."})})]})}function ls(){return n(Sn,{maxWidth:"lg",sx:{margin:"10px auto"},children:n(U,{sx:{padding:"10px 20px"},children:f(rn,{children:[n(se,{path:"/",element:n(nn,{replace:!0,to:"/diceroller"})}),n(se,{path:"/diceroller",element:n($i,{})}),n(se,{path:"/lifepaths",element:n(Ma,{})}),n(se,{path:"/skills",element:n(Ga,{})}),n(se,{path:"/traits",element:n(Fa,{})}),n(se,{path:"/resources",element:n(ss,{})}),n(se,{path:"/lprandomizer",element:n(ja,{})}),n(se,{path:"/practiceplanner",element:n(za,{})}),n(se,{path:"/magicwheel",element:n(Qa,{})}),n(se,{path:"/dowplanner",element:n(es,{})}),n(se,{path:"/racplanner",element:n(rs,{})}),n(se,{path:"/fightplanner",element:n(is,{})})]})})})}function os(){const{drwToggleDrawer:e}=ee().drawer;return f(E.exports.Fragment,{children:[n(U,{square:!0,elevation:10,sx:{position:"fixed",top:"0",left:"0",width:"max-content"},children:n(J,{onClick:e,children:n(On,{})})}),n(ji,{}),n(ls,{})]})}an.createRoot(document.getElementById("root")).render(n(E.exports.StrictMode,{children:n(sn,{store:Mi,children:f(Tn,{theme:dt,children:[n(wn,{}),n(ln,{children:n(os,{})})]})})}));
